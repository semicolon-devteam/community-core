import{jsx,jsxs}from"react/jsx-runtime";import*as React from"react";import React__default,{createContext,useContext,useCallback,useState,useMemo,useEffect,forwardRef,useRef,Fragment}from"react";import{usePathname,useSearchParams,useRouter}from"next/navigation";import BoardTableHeader from"@atoms/Column/BoardTableHeader";import axios,{AxiosError}from"axios";import"lodash";import{updateDeviceTypeFromWidth}from"@redux/Features/App/appSlice";import{selectUIState,showMiniLoading,hideMiniLoading,setMiniLoadingText,showLoading,hideAllLoaders,hideLoading,setLoadingText}from"@redux/Features/UI/uiSlice";import"@redux/Features/Popup/popupSlice";import{showToast}from"@redux/Features/Toast/toastSlice";import{selectUserInfo,login,logout,autoLogin}from"@redux/Features/User/userSlice";import{getUserLevel as getUserLevel$1,isAdmin as isAdmin$1,hasLevelPermission as hasLevelPermission$1,hasBoardPermission as hasBoardPermission$1}from"@util/authUtil";import{getCurrentUserFromToken as getCurrentUserFromToken$1}from"@util/jwtUtil";import BoardTableBody from"@atoms/Column/BoardTableBody";import pointService from"@services/pointService";import{useQuery}from"@tanstack/react-query";import{timeAgo as timeAgo$1}from"@util/dateUtil";import commentService from"@services/commentService";import{createClient}from"@supabase/supabase-js";const formatNumberWithComma=num=>{if(null==num||""===num)return"";const numStr=undefined,parts=("number"==typeof num?num.toString():num).split(".");return parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),parts.length>1?parts.join("."):parts[0]},removeCommaFromString=str=>str?parseFloat(str.replace(/,/g,"")):0;var numberUtil=Object.freeze({__proto__:null,formatNumberWithComma:formatNumberWithComma,removeCommaFromString:removeCommaFromString});function formatDate(dateString,isSimple=!1){if(!dateString)return"";const date=new Date(dateString);if(isNaN(date.getTime()))return dateString;const year=date.getFullYear(),month=String(date.getMonth()+1).padStart(2,"0"),day=String(date.getDate()).padStart(2,"0"),hours=String(date.getHours()).padStart(2,"0"),minutes=String(date.getMinutes()).padStart(2,"0"),seconds=String(date.getSeconds()).padStart(2,"0");return isSimple?`${year}.${month}.${day}`:`${year}.${month}.${day}. ${hours}:${minutes}:${seconds}`}function timeAgo(dateString,isSimple=!0){if(!dateString)return"";const date=new Date(dateString);if(isNaN(date.getTime()))return dateString;const now=new Date,seconds=Math.floor((now.getTime()-date.getTime())/1e3);if(seconds<60)return"방금 전";const minutes=Math.floor(seconds/60);if(minutes<60)return`${minutes}분 전`;const hours=Math.floor(minutes/60);return hours<24?`${hours}시간 전`:isSimple?DateUtil.toChar(dateString,"MM.dd"):DateUtil.toChar(dateString,"yyyy.MM.dd. HH:mm:ss")}const DateUtil={toChar(input,format="YYYY.MM.DD. HH:MM:SS"){const date="string"==typeof input?new Date(input):input;if(!date||isNaN(date.getTime()))return"";const map={yyyy:String(date.getFullYear()),MM:String(date.getMonth()+1).padStart(2,"0"),dd:String(date.getDate()).padStart(2,"0"),HH:String(date.getHours()).padStart(2,"0"),mm:String(date.getMinutes()).padStart(2,"0"),ss:String(date.getSeconds()).padStart(2,"0")};return Object.entries(map).reduce((result,[key,value])=>result.replace(key,value),format)}};var dateUtil=Object.freeze({__proto__:null,DateUtil:DateUtil,formatDate:formatDate,timeAgo:timeAgo});function isJWTPayload(user){return user&&"string"==typeof user.sub&&user.user_metadata}function isUserObject(user){return user&&"string"==typeof user.id&&user.nickname&&user.permissionType}const isValidUser=user=>!!user&&"string"==typeof user.id&&!!user.nickname&&!!user.permissionType,checkIsAdmin=user=>user.level>=99||"admin"===user.permissionType||"super_admin"===user.permissionType,isAdmin=user=>!!user&&checkIsAdmin(user),isSuperAdmin=user=>!!user&&checkIsAdmin(user),isAdminOrSuperAdmin=user=>!!user&&checkIsAdmin(user),hasLevelPermission=(user,requiredLevel=0)=>{if(!user||"object"==typeof user&&0===Object.keys(user).length)return 0===requiredLevel;if(isAdmin(user))return!0;if(isUserObject(user))return user.level>=requiredLevel;if(isJWTPayload(user)){console.warn("[DEPRECATED] JWT 기반 권한 체크는 권장하지 않습니다. useAppSelector(selectUserInfo)를 사용하여 Redux store의 사용자 정보를 활용하세요.");const userLevel=undefined;return(user.is_admin?99:user.level||1)>=requiredLevel}return user.level>=requiredLevel},hasBoardPermission=(user,requiredLevel=0,isLoggedIn=!1)=>"free"===requiredLevel||0===requiredLevel||!(!isLoggedIn||!user)&&hasLevelPermission(user,requiredLevel),getUserLevel=user=>user?isUserObject(user)?user.level||0:isJWTPayload(user)?(console.warn("[DEPRECATED] JWT 기반 레벨 조회는 권장하지 않습니다. useAppSelector(selectUserInfo)를 사용하여 Redux store의 사용자 정보를 활용하세요."),user.is_admin?99:user.level||1):user.level||0:0,getUserPermissionType=user=>user?user.permissionType||"user":"anonymous",getUserPermissionTypeFromJWT=user=>user?user.permissionType||"user":"anonymous",getUserPermissionTypeFromDB=user=>user?user.permissionType||"user":"anonymous";var authUtil=Object.freeze({__proto__:null,checkIsAdmin:checkIsAdmin,getUserLevel:getUserLevel,getUserPermissionType:getUserPermissionType,getUserPermissionTypeFromDB:getUserPermissionTypeFromDB,getUserPermissionTypeFromJWT:getUserPermissionTypeFromJWT,hasBoardPermission:hasBoardPermission,hasLevelPermission:hasLevelPermission,isAdmin:isAdmin,isAdminOrSuperAdmin:isAdminOrSuperAdmin,isJWTPayload:isJWTPayload,isSuperAdmin:isSuperAdmin,isUserObject:isUserObject,isValidUser:isValidUser});const IMAGE_SIZE={sm:120,md:240,lg:480,xl:720,xxl:960};function transformSupabaseImageUrl(url,size="md",quality=70){if(!url||!url.includes("/storage/v1/object/"))return url;try{const transformedUrl=url.replace("/storage/v1/object/","/storage/v1/render/image/"),width="number"==typeof size?size:IMAGE_SIZE[size],validQuality=Math.max(20,Math.min(100,quality)),separator=transformedUrl.includes("?")?"&":"?",params=undefined;return`${transformedUrl}${separator}${`width=${width}&quality=${validQuality}`}`}catch(error){return console.error("Failed to transform Supabase image URL:",error),url}}function generateImageSrcSet(url,sizes=["sm","md","lg"],quality=70){const result={};return sizes.forEach(size=>{result[size]=transformSupabaseImageUrl(url,size,quality)}),result}function supabaseImageLoader({src:src,width:width,quality:quality}){const baseUrl=undefined,validQuality=undefined;return`${"https://community.semi-colon.space"}/storage/v1/render/image/public/${src}?width=${width}&quality=${quality||75}`}function normalizeImageSrc(src){if(!src||"string"!=typeof src)return src;try{const resourceUrl=process.env.NEXT_PUBLIC_STORAGE_URL;if(resourceUrl&&src.startsWith(resourceUrl)){const relativePath=src.replace(resourceUrl,"");return relativePath.startsWith("/")?relativePath:`/${relativePath}`}return src}catch(error){return console.error("Failed to normalize image src:",error),src}}function optimizeImageSrc(src,size,quality){const normalizedSrc=normalizeImageSrc(src);return void 0!==size&&normalizedSrc.includes("/storage/v1/object/")?transformSupabaseImageUrl(normalizedSrc,size,quality):normalizedSrc}function isGifImage(src){if(!src||"string"!=typeof src)return!1;const lowerSrc=src.toLowerCase();return lowerSrc.endsWith(".gif")||lowerSrc.includes(".gif?")}function isAnimatedImage(src){return!(!src||"string"!=typeof src)&&(src.toLowerCase(),isGifImage(src))}function getImageProps(src){return isGifImage(src)?{unoptimized:!0}:{}}var imageUtil=Object.freeze({__proto__:null,IMAGE_SIZE:IMAGE_SIZE,generateImageSrcSet:generateImageSrcSet,getImageProps:getImageProps,isAnimatedImage:isAnimatedImage,isGifImage:isGifImage,normalizeImageSrc:normalizeImageSrc,optimizeImageSrc:optimizeImageSrc,supabaseImageLoader:supabaseImageLoader,transformSupabaseImageUrl:transformSupabaseImageUrl});class LevelUtil{static calculateUserLevel(currentPoints,levelTable){if(!levelTable.length)return 0;const sortedLevels=[...levelTable].sort((a,b)=>a.level-b.level);let userLevel=0;for(const level of sortedLevels){if(!(currentPoints>=level.required_points))break;userLevel=level.level}return userLevel}static getLevelProgress(currentPoints,levelTable){if(!levelTable.length)return{currentLevel:0,currentLevelPoints:0,nextLevel:1,nextLevelPoints:0,progressPercentage:0,pointsToNext:0};const sortedLevels=[...levelTable].sort((a,b)=>a.level-b.level),userLevel=this.calculateUserLevel(currentPoints,levelTable),currentLevelInfo=sortedLevels.find(level=>level.level===userLevel),currentLevelPoints=currentLevelInfo?.required_points||0,nextLevelInfo=sortedLevels.find(level=>level.level===userLevel+1),nextLevel=nextLevelInfo?.level||userLevel,nextLevelPoints=nextLevelInfo?.required_points||currentLevelPoints;let progressPercentage=0,pointsToNext=0;if(nextLevelInfo){const pointsNeededForNext=nextLevelPoints-currentLevelPoints,pointsEarnedInCurrentLevel=currentPoints-currentLevelPoints;progressPercentage=pointsNeededForNext>0?Math.min(100,pointsEarnedInCurrentLevel/pointsNeededForNext*100):100,pointsToNext=Math.max(0,nextLevelPoints-currentPoints)}else progressPercentage=100,pointsToNext=0;return{currentLevel:userLevel,currentLevelPoints:currentLevelPoints,nextLevel:nextLevel,nextLevelPoints:nextLevelPoints,progressPercentage:Math.round(progressPercentage),pointsToNext:pointsToNext}}static getNextLevelInfo(currentPoints,levelTable){if(!levelTable.length)return{nextLevel:1,requiredPoint:0,levelUpPercentage:0,isMaxLevel:!0};const sortedLevels=[...levelTable].sort((a,b)=>a.level-b.level),userLevel=this.calculateUserLevel(currentPoints,levelTable),currentLevelInfo=sortedLevels.find(level=>level.level===userLevel),currentLevelPoints=currentLevelInfo?.required_points||0,nextLevelInfo=sortedLevels.find(level=>level.level===userLevel+1);if(!nextLevelInfo)return{nextLevel:userLevel,requiredPoint:0,levelUpPercent:100,isMaxLevel:!0};const nextLevel=nextLevelInfo.level,nextLevelPoints=nextLevelInfo.required_points,requiredPoint=undefined,pointsNeededForNext=nextLevelPoints-currentLevelPoints,pointsEarnedInCurrentLevel=currentPoints-currentLevelPoints,levelUpPercent=undefined;return{nextLevel:nextLevel,requiredPoint:Math.max(0,nextLevelPoints-currentPoints),levelUpPercent:pointsNeededForNext>0?Math.min(100,Math.round(pointsEarnedInCurrentLevel/pointsNeededForNext*100)):100,isMaxLevel:!1}}}var levelUtil=Object.freeze({__proto__:null,LevelUtil:LevelUtil});const toCamelCase=str=>str.replace(/_([a-z])/g,(_,letter)=>letter.toUpperCase()),toSnakeCase=str=>str.replace(/[A-Z]/g,letter=>`_${letter.toLowerCase()}`),keysToCamelCase=obj=>{if(null==obj)return obj;if(Array.isArray(obj))return obj.map(item=>"object"==typeof item&&null!==item?keysToCamelCase(item):item);if("object"==typeof obj){const result={};for(const[key,value]of Object.entries(obj)){const camelKey=toCamelCase(key);"object"!=typeof value||null===value||Array.isArray(value)?Array.isArray(value)?result[camelKey]=value.map(item=>"object"==typeof item&&null!==item?keysToCamelCase(item):item):result[camelKey]=value:result[camelKey]=keysToCamelCase(value)}return result}return obj},keysToSnakeCase=obj=>{if(null==obj)return obj;if(Array.isArray(obj))return obj.map(item=>"object"==typeof item&&null!==item?keysToSnakeCase(item):item);if("object"==typeof obj){const result={};for(const[key,value]of Object.entries(obj)){const snakeKey=toSnakeCase(key);"object"!=typeof value||null===value||Array.isArray(value)?Array.isArray(value)?result[snakeKey]=value.map(item=>"object"==typeof item&&null!==item?keysToSnakeCase(item):item):result[snakeKey]=value:result[snakeKey]=keysToSnakeCase(value)}return result}return obj};var stringUtil=Object.freeze({__proto__:null,keysToCamelCase:keysToCamelCase,keysToSnakeCase:keysToSnakeCase,toCamelCase:toCamelCase,toSnakeCase:toSnakeCase});const addUrlParams=(baseUrl,params)=>{try{const url=baseUrl.startsWith("http")?new URL(baseUrl):new URL(baseUrl,window.location.origin),searchParams=new URLSearchParams(url.search);return Object.entries(params).forEach(([key,value])=>{searchParams.set(key,value)}),`${url.pathname}?${searchParams.toString()}`}catch(error){throw console.error("URL 파싱 오류:",error),new Error("유효하지 않은 URL입니다.")}},getPreviousUrlWithParams=(storageKey,params,fallbackUrl="/")=>{const previousUrl=sessionStorage.getItem(storageKey);if(!previousUrl)return fallbackUrl;try{return addUrlParams(previousUrl,params)}catch(error){return console.error("이전 URL 처리 오류:",error),fallbackUrl}};var urlUtil=Object.freeze({__proto__:null,addUrlParams:addUrlParams,getPreviousUrlWithParams:getPreviousUrlWithParams});function base64UrlDecode(str){for(str=str.replace(/-/g,"+").replace(/_/g,"/");str.length%4;)str+="=";return decodeURIComponent(atob(str).split("").map(c=>"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)).join(""))}function decodeJWTPayload(token){try{const parts=token.split(".");if(3!==parts.length)return console.error("Invalid JWT format"),null;const payload=base64UrlDecode(parts[1]);return JSON.parse(payload)}catch(error){return console.error("JWT 디코딩 실패:",error),null}}async function getCurrentUserFromToken(){try{const{clientSupabase:clientSupabase}=await Promise.resolve().then(function(){return client}),{data:{session:session}}=await clientSupabase.auth.getSession();return session?.access_token?decodeJWTPayload(session.access_token):null}catch(error){return console.error("토큰에서 사용자 정보 추출 실패:",error),null}}function isTokenExpired(payload){const now=Math.floor(Date.now()/1e3);return payload.exp<=now}function getTokenTimeToExpiry(payload){const now=Math.floor(Date.now()/1e3);return payload.exp-now}function removeExpiredTokenFromCookie(cookieName="sb-access-token"){if("undefined"!=typeof window)try{const cookieString=document.cookie.split("; ").find(row=>row.startsWith(`${cookieName}=`))?.split("=")[1];if(!cookieString)return;const decodedCookie=decodeURIComponent(cookieString),sessionData=JSON.parse(decodedCookie),accessToken=sessionData?.access_token;if(!accessToken)return;const payload=decodeJWTPayload(accessToken);if(payload&&isTokenExpired(payload)){console.log("🗑️ 만료된 토큰 감지, 쿠키에서 제거 중..."),document.cookie=`${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax`;const relatedCookies=undefined;["supabase-auth-token","sb-auth-token","auth-token"].forEach(name=>{document.cookie=`${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax`}),console.log("✅ 만료된 토큰 쿠키 제거 완료")}}catch(error){console.error("❌ 만료된 토큰 제거 중 오류:",error)}}async function validateAndCleanToken(){try{const{clientSupabase:clientSupabase}=await Promise.resolve().then(function(){return client}),{data:{session:session}}=await clientSupabase.auth.getSession();if(!session?.access_token)return removeExpiredTokenFromCookie(),null;const payload=decodeJWTPayload(session.access_token);return payload?isTokenExpired(payload)?(removeExpiredTokenFromCookie(),await clientSupabase.auth.signOut(),null):payload:(removeExpiredTokenFromCookie(),null)}catch(error){return console.error("토큰 검증 및 정리 실패:",error),removeExpiredTokenFromCookie(),null}}function shouldRefreshToken(payload){const timeToExpiry=undefined;return getTokenTimeToExpiry(payload)<=300}var jwtUtil=Object.freeze({__proto__:null,decodeJWTPayload:decodeJWTPayload,getCurrentUserFromToken:getCurrentUserFromToken,getTokenTimeToExpiry:getTokenTimeToExpiry,isTokenExpired:isTokenExpired,removeExpiredTokenFromCookie:removeExpiredTokenFromCookie,shouldRefreshToken:shouldRefreshToken,validateAndCleanToken:validateAndCleanToken}),UploadErrorType;!function(UploadErrorType){UploadErrorType.NETWORK_ERROR="network_error",UploadErrorType.FILE_TOO_LARGE="file_too_large",UploadErrorType.UNSUPPORTED_FORMAT="unsupported_format",UploadErrorType.PERMISSION_DENIED="permission_denied",UploadErrorType.SERVER_ERROR="server_error",UploadErrorType.UPLOAD_TIMEOUT="upload_timeout",UploadErrorType.QUOTA_EXCEEDED="quota_exceeded",UploadErrorType.INVALID_POST="invalid_post"}(UploadErrorType||(UploadErrorType={}));const ERROR_MESSAGES={[UploadErrorType.FILE_TOO_LARGE]:"파일 크기가 너무 큽니다. 이미지는 10MB, 비디오는 100MB 이하로 업로드해주세요.",[UploadErrorType.UNSUPPORTED_FORMAT]:"지원하지 않는 파일 형식입니다. JPG, PNG, GIF, WebP, MP4, AVI, MOV 파일만 업로드 가능합니다.",[UploadErrorType.PERMISSION_DENIED]:"파일 업로드 권한이 없습니다. 로그인 상태를 확인해주세요.",[UploadErrorType.NETWORK_ERROR]:"네트워크 오류가 발생했습니다. 인터넷 연결을 확인하고 다시 시도해주세요.",[UploadErrorType.SERVER_ERROR]:"서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.",[UploadErrorType.UPLOAD_TIMEOUT]:"업로드 시간이 초과되었습니다. 파일 크기를 확인하거나 다시 시도해주세요.",[UploadErrorType.QUOTA_EXCEEDED]:"업로드 할당량을 초과했습니다. 불필요한 파일을 삭제하거나 관리자에게 문의하세요.",[UploadErrorType.INVALID_POST]:"유효하지 않은 게시글입니다. 게시글을 다시 생성해주세요."};function getUploadErrorMessage(error){const errorMessage=error?.message?.toLowerCase()||"",errorResponse=error?.response?.data;if(errorResponse?.error?.code){const errorCode=errorResponse.error.code;if(ERROR_MESSAGES[errorCode])return ERROR_MESSAGES[errorCode]}return errorMessage.includes("file too large")||errorMessage.includes("413")?ERROR_MESSAGES[UploadErrorType.FILE_TOO_LARGE]:errorMessage.includes("unsupported")||errorMessage.includes("invalid format")||errorMessage.includes("415")?ERROR_MESSAGES[UploadErrorType.UNSUPPORTED_FORMAT]:errorMessage.includes("permission")||errorMessage.includes("unauthorized")||errorMessage.includes("401")||errorMessage.includes("403")?ERROR_MESSAGES[UploadErrorType.PERMISSION_DENIED]:errorMessage.includes("network")||errorMessage.includes("fetch")||errorMessage.includes("timeout")||"NETWORK_ERROR"===error?.code?ERROR_MESSAGES[UploadErrorType.NETWORK_ERROR]:errorMessage.includes("quota")||errorMessage.includes("storage full")||errorMessage.includes("429")?ERROR_MESSAGES[UploadErrorType.QUOTA_EXCEEDED]:errorMessage.includes("post not found")||errorMessage.includes("invalid post")||errorMessage.includes("404")?ERROR_MESSAGES[UploadErrorType.INVALID_POST]:"파일 업로드 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요."}function isRetryableError(error){const errorMessage=error?.message?.toLowerCase()||"",errorCode=error?.response?.data?.error?.code,nonRetryableErrors=undefined;return![UploadErrorType.FILE_TOO_LARGE,UploadErrorType.UNSUPPORTED_FORMAT,UploadErrorType.PERMISSION_DENIED,UploadErrorType.QUOTA_EXCEEDED,UploadErrorType.INVALID_POST].includes(errorCode)&&!(errorMessage.includes("file too large")||errorMessage.includes("unsupported")||errorMessage.includes("invalid format")||errorMessage.includes("permission")||errorMessage.includes("unauthorized")||errorMessage.includes("quota"))}function logUploadError(error,context){const errorInfo={message:error?.message||"Unknown error",stack:error?.stack,response:error?.response?.data,context:context,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent};"development"===process.env.NODE_ENV&&(console.group("🚨 Upload Error"),console.error("Error Details:",errorInfo),console.groupEnd()),"production"===process.env.NODE_ENV&&console.error("Upload Error:",errorInfo)}function calculateUploadMetrics(files,startTime){const totalFiles=undefined,completedFiles=undefined,failedFiles=undefined,totalBytes=undefined,uploadedBytes=undefined;return{startTime:startTime,totalFiles:files.length,completedFiles:files.filter(f=>"completed"===f.status).length,failedFiles:files.filter(f=>"failed"===f.status).length,totalBytes:files.reduce((sum,f)=>sum+(f.fileSize||0),0),uploadedBytes:files.reduce((sum,f)=>sum+(f.fileSize||0)*((f.progress||0)/100),0),retryCount:0}}function estimateCompletionTime(metrics){const elapsed=Date.now()-metrics.startTime,progress=metrics.uploadedBytes/metrics.totalBytes;if(0===progress)return null;const totalEstimated=undefined,remaining=elapsed/progress-elapsed;return Math.max(0,remaining)}function calculateUploadSpeed(metrics){const elapsed=(Date.now()-metrics.startTime)/1e3,uploadedMB=metrics.uploadedBytes/1048576;return elapsed>0?uploadedMB/elapsed:0}var index=Object.freeze({__proto__:null,AuthUtils:authUtil,DateUtil:DateUtil,DateUtils:dateUtil,IMAGE_SIZE:IMAGE_SIZE,ImageUtils:imageUtil,JwtUtils:jwtUtil,LevelUtil:LevelUtil,LevelUtils:levelUtil,NumberUtils:numberUtil,StringUtils:stringUtil,get UploadErrorType(){return UploadErrorType},UrlUtils:urlUtil,addUrlParams:addUrlParams,calculateUploadMetrics:calculateUploadMetrics,calculateUploadSpeed:calculateUploadSpeed,decodeJWTPayload:decodeJWTPayload,estimateCompletionTime:estimateCompletionTime,formatDate:formatDate,formatNumberWithComma:formatNumberWithComma,generateImageSrcSet:generateImageSrcSet,getCurrentUserFromToken:getCurrentUserFromToken,getPreviousUrlWithParams:getPreviousUrlWithParams,getTokenTimeToExpiry:getTokenTimeToExpiry,getUploadErrorMessage:getUploadErrorMessage,isAdmin:isAdmin,isRetryableError:isRetryableError,isTokenExpired:isTokenExpired,keysToCamelCase:keysToCamelCase,keysToSnakeCase:keysToSnakeCase,logUploadError:logUploadError,normalizeImageSrc:normalizeImageSrc,optimizeImageSrc:optimizeImageSrc,removeExpiredTokenFromCookie:removeExpiredTokenFromCookie,shouldRefreshToken:shouldRefreshToken,supabaseImageLoader:supabaseImageLoader,timeAgo:timeAgo,toCamelCase:toCamelCase,toSnakeCase:toSnakeCase,transformSupabaseImageUrl:transformSupabaseImageUrl,validateAndCleanToken:validateAndCleanToken});let globalConfig={};function initializeCommunityCore(config){globalConfig={...globalConfig,...config},config.development&&console.log("🚀 @semicolon/community-core initialized with config:",globalConfig)}function getPackageConfig(){return Object.freeze({...globalConfig})}const defaultColorPalettes={slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"}},defaultSemanticColors={primary:defaultColorPalettes.blue,secondary:defaultColorPalettes.slate,success:defaultColorPalettes.emerald,warning:defaultColorPalettes.amber,error:defaultColorPalettes.red,info:defaultColorPalettes.sky,gray:defaultColorPalettes.gray},lightSystemColors={background:{primary:defaultColorPalettes.gray[50],secondary:"#ffffff",tertiary:defaultColorPalettes.gray[100],inverse:defaultColorPalettes.gray[900],overlay:"rgba(0, 0, 0, 0.5)"},surface:{primary:"#ffffff",secondary:defaultColorPalettes.gray[50],tertiary:defaultColorPalettes.gray[100],inverse:defaultColorPalettes.gray[900],elevated:"#ffffff"},border:{primary:defaultColorPalettes.gray[200],secondary:defaultColorPalettes.gray[300],tertiary:defaultColorPalettes.gray[400],inverse:defaultColorPalettes.gray[700],focus:defaultColorPalettes.blue[500]},text:{primary:defaultColorPalettes.gray[900],secondary:defaultColorPalettes.gray[600],tertiary:defaultColorPalettes.gray[500],inverse:"#ffffff",disabled:defaultColorPalettes.gray[400],link:defaultColorPalettes.blue[600],linkHover:defaultColorPalettes.blue[700]}},darkSystemColors={background:{primary:defaultColorPalettes.gray[950],secondary:defaultColorPalettes.gray[900],tertiary:defaultColorPalettes.gray[800],inverse:defaultColorPalettes.gray[50],overlay:"rgba(0, 0, 0, 0.7)"},surface:{primary:defaultColorPalettes.gray[900],secondary:defaultColorPalettes.gray[800],tertiary:defaultColorPalettes.gray[700],inverse:defaultColorPalettes.gray[50],elevated:defaultColorPalettes.gray[800]},border:{primary:defaultColorPalettes.gray[700],secondary:defaultColorPalettes.gray[600],tertiary:defaultColorPalettes.gray[500],inverse:defaultColorPalettes.gray[300],focus:defaultColorPalettes.blue[400]},text:{primary:defaultColorPalettes.gray[50],secondary:defaultColorPalettes.gray[300],tertiary:defaultColorPalettes.gray[400],inverse:defaultColorPalettes.gray[900],disabled:defaultColorPalettes.gray[600],link:defaultColorPalettes.blue[400],linkHover:defaultColorPalettes.blue[300]}},defaultTypography={fontFamily:{sans:["ui-sans-serif","system-ui","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"',"sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"','"Noto Color Emoji"'],serif:["ui-serif","Georgia","Cambria",'"Times New Roman"',"Times","serif"],mono:["ui-monospace","SFMono-Regular",'"SF Mono"',"Consolas",'"Liberation Mono"',"Menlo","monospace"]},fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem"},fontWeight:{thin:100,extralight:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},lineHeight:{none:1,tight:1.25,snug:1.375,normal:1.5,relaxed:1.625,loose:2},letterSpacing:{tighter:"-0.05em",tight:"-0.025em",normal:"0em",wide:"0.025em",wider:"0.05em",widest:"0.1em"}},koreanOptimizedTypography={...defaultTypography,fontFamily:{sans:["ui-sans-serif","system-ui","-apple-system","BlinkMacSystemFont",'"Malgun Gothic"','"맑은 고딕"','"Apple SD Gothic Neo"','"Noto Sans KR"','"Segoe UI"',"Roboto","sans-serif"],serif:['"Noto Serif KR"',"ui-serif","Georgia","serif"],mono:['"D2Coding"','"Consolas"',"ui-monospace","SFMono-Regular","monospace"]},lineHeight:{none:1,tight:1.3,snug:1.4,normal:1.6,relaxed:1.7,loose:2}},defaultSpacing={px:"1px",0:"0px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},defaultBorderRadius={none:"0px",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},defaultBoxShadow={sm:"0 1px 2px 0 rgb(0 0 0 / 0.05)",base:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",md:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",lg:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",xl:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)","2xl":"0 25px 50px -12px rgb(0 0 0 / 0.25)",inner:"inset 0 2px 4px 0 rgb(0 0 0 / 0.05)",none:"0 0 #0000"},defaultAnimation={duration:{75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},timingFunction:{linear:"linear",in:"cubic-bezier(0.4, 0, 1, 1)",out:"cubic-bezier(0, 0, 0.2, 1)","in-out":"cubic-bezier(0.4, 0, 0.2, 1)"}},defaultZIndex={auto:"auto",0:0,10:10,20:20,30:30,40:40,50:50,dropdown:1e3,sticky:1020,fixed:1030,modal:1040,popover:1050,tooltip:1060,toast:1070},defaultBreakpoints={sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},defaultComponentTokens={button:{borderRadius:"md",fontSize:{xs:"xs",sm:"sm",base:"base",lg:"lg"},padding:{xs:"0.375rem 0.75rem",sm:"0.5rem 1rem",base:"0.625rem 1.25rem",lg:"0.75rem 1.5rem"},height:{xs:"1.75rem",sm:"2.25rem",base:"2.5rem",lg:"3rem"}},input:{borderRadius:"md",fontSize:"base",padding:"0.625rem 0.75rem",height:"2.5rem"},badge:{borderRadius:"base",fontSize:{xs:"xs",sm:"xs",base:"sm"},padding:{xs:"0.125rem 0.375rem",sm:"0.25rem 0.5rem",base:"0.375rem 0.75rem"}},avatar:{borderRadius:{square:"md",rounded:"xl",circle:"full"}},skeleton:{borderRadius:"base",animation:{duration:"1000",timingFunction:"in-out"}}},defaultLightTheme$1={colors:{semantic:defaultSemanticColors,system:lightSystemColors},typography:defaultTypography,spacing:defaultSpacing,borderRadius:defaultBorderRadius,boxShadow:defaultBoxShadow,animation:defaultAnimation,zIndex:defaultZIndex,breakpoints:defaultBreakpoints,components:defaultComponentTokens},defaultDarkTheme$1={colors:{semantic:defaultSemanticColors,system:darkSystemColors},typography:defaultTypography,spacing:defaultSpacing,borderRadius:defaultBorderRadius,boxShadow:defaultBoxShadow,animation:defaultAnimation,zIndex:defaultZIndex,breakpoints:defaultBreakpoints,components:defaultComponentTokens},koreanLightTheme={...defaultLightTheme$1,typography:koreanOptimizedTypography},koreanDarkTheme={...defaultDarkTheme$1,typography:koreanOptimizedTypography},themePresets={"default-light":defaultLightTheme$1,"default-dark":defaultDarkTheme$1,"korean-light":koreanLightTheme,"korean-dark":koreanDarkTheme};function getThemePreset(preset){return themePresets[preset]}function getThemeByMode(mode,locale="default"){const presetKey=undefined;return themePresets[`${locale}-${mode}`]}function isObject(item){return null!==item&&"object"==typeof item&&!Array.isArray(item)}function deepMerge(target,source){const result={...target};for(const key in source){const sourceValue=source[key],targetValue=result[key];isObject(sourceValue)&&isObject(targetValue)?result[key]=deepMerge(targetValue,sourceValue):void 0!==sourceValue&&(result[key]=sourceValue)}return result}function mergeTheme(baseTheme,override){return deepMerge(baseTheme,override)}function generateColorPaletteVars(palette,prefix,colorName){const vars=[];return Object.entries(palette).forEach(([shade,value])=>{vars.push(`--${prefix}-${colorName}-${shade}: ${value};`)}),vars.join(" ")}function generateSemanticColorVars(colors,prefix){const vars=[];return Object.entries(colors).forEach(([colorName,palette])=>{vars.push(generateColorPaletteVars(palette,prefix,colorName))}),vars.join(" ")}function generateSystemColorVars(colors,prefix){const vars=[];return Object.entries(colors).forEach(([category,categoryColors])=>{Object.entries(categoryColors).forEach(([name,value])=>{vars.push(`--${prefix}-${category}-${name}: ${value};`)})}),vars.join(" ")}function generateTypographyVars(typography,prefix){const vars=[];return Object.entries(typography.fontFamily).forEach(([name,fonts])=>{vars.push(`--${prefix}-font-family-${name}: ${fonts.join(", ")};`)}),Object.entries(typography.fontSize).forEach(([size,value])=>{vars.push(`--${prefix}-font-size-${size}: ${value};`)}),Object.entries(typography.fontWeight).forEach(([weight,value])=>{vars.push(`--${prefix}-font-weight-${weight}: ${value};`)}),Object.entries(typography.lineHeight).forEach(([height,value])=>{vars.push(`--${prefix}-line-height-${height}: ${value};`)}),Object.entries(typography.letterSpacing).forEach(([spacing,value])=>{vars.push(`--${prefix}-letter-spacing-${spacing}: ${value};`)}),vars.join(" ")}function generateSpacingVars(spacing,prefix){const vars=[];return Object.entries(spacing).forEach(([size,value])=>{vars.push(`--${prefix}-spacing-${size}: ${value};`)}),vars.join(" ")}function generateBorderRadiusVars(borderRadius,prefix){const vars=[];return Object.entries(borderRadius).forEach(([size,value])=>{vars.push(`--${prefix}-border-radius-${size}: ${value};`)}),vars.join(" ")}function generateBoxShadowVars(boxShadow,prefix){const vars=[];return Object.entries(boxShadow).forEach(([size,value])=>{vars.push(`--${prefix}-box-shadow-${size}: ${value};`)}),vars.join(" ")}function generateAnimationVars(animation,prefix){const vars=[];return Object.entries(animation.duration).forEach(([duration,value])=>{vars.push(`--${prefix}-duration-${duration}: ${value};`)}),Object.entries(animation.timingFunction).forEach(([timing,value])=>{vars.push(`--${prefix}-timing-${timing}: ${value};`)}),vars.join(" ")}function generateZIndexVars(zIndex,prefix){const vars=[];return Object.entries(zIndex).forEach(([name,value])=>{vars.push(`--${prefix}-z-index-${name}: ${value};`)}),vars.join(" ")}function generateCSSVariables(theme,prefix="cc"){const vars=[];return vars.push(generateSemanticColorVars(theme.colors.semantic,prefix)),vars.push(generateSystemColorVars(theme.colors.system,prefix)),vars.push(generateTypographyVars(theme.typography,prefix)),vars.push(generateSpacingVars(theme.spacing,prefix)),vars.push(generateBorderRadiusVars(theme.borderRadius,prefix)),vars.push(generateBoxShadowVars(theme.boxShadow,prefix)),vars.push(generateAnimationVars(theme.animation,prefix)),vars.push(generateZIndexVars(theme.zIndex,prefix)),vars.join(" ")}function createCSSVariable(tokenPath,prefix="cc"){return`var(--${prefix}-${tokenPath})`}function createColorVariable(color,shade,prefix="cc"){return createCSSVariable(`${color}-${shade}`,prefix)}function createSpacingVariable(size,prefix="cc"){return createCSSVariable(`spacing-${size}`,prefix)}function createFontSizeVariable(size,prefix="cc"){return createCSSVariable(`font-size-${size}`,prefix)}const ThemeContext=createContext(null),STORAGE_KEY="community-core-theme-mode";function getStoredMode(storageKey){if("undefined"==typeof window)return null;try{const stored=localStorage.getItem(storageKey||STORAGE_KEY);if("light"===stored||"dark"===stored)return stored}catch(error){console.warn("Failed to read theme mode from localStorage:",error)}return null}function setStoredMode(mode,storageKey){if("undefined"!=typeof window)try{localStorage.setItem(storageKey||STORAGE_KEY,mode)}catch(error){console.warn("Failed to store theme mode:",error)}}function getSystemMode(){return"undefined"==typeof window?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function ThemeProvider$1({children:children,config:config={},initialTheme:initialTheme,storageKey:storageKey}){const{mode:configMode="light",theme:themeOverride={},cssVarPrefix:cssVarPrefix="cc",respectSystemTheme:respectSystemTheme=!0}=config,getInitialMode=useCallback(()=>{const storedMode=getStoredMode(storageKey);return storedMode||(respectSystemTheme?getSystemMode():configMode)},[configMode,respectSystemTheme,storageKey]),[mode,setMode]=useState(getInitialMode),baseTheme=useMemo(()=>initialTheme||("light"===mode?defaultLightTheme$1:defaultDarkTheme$1),[initialTheme,mode]),theme=useMemo(()=>mergeTheme(baseTheme,themeOverride),[baseTheme,themeOverride]),changeMode=useCallback(newMode=>{setMode(newMode),setStoredMode(newMode,storageKey)},[storageKey]),toggleMode=useCallback(()=>{changeMode("light"===mode?"dark":"light")},[mode,changeMode]),updateTheme=useCallback(override=>{console.warn("Runtime theme updates require parent component to update config.theme")},[]),resetTheme=useCallback(()=>{updateTheme({})},[updateTheme]);useEffect(()=>{if(!respectSystemTheme)return;const mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),handleChange=e=>{const systemMode=e.matches?"dark":"light";getStoredMode(storageKey)||setMode(systemMode)};return mediaQuery.addEventListener("change",handleChange),()=>mediaQuery.removeEventListener("change",handleChange)},[respectSystemTheme,storageKey]),useEffect(()=>{const cssVars=generateCSSVariables(theme,cssVarPrefix),styleId=`${cssVarPrefix}-theme-vars`,existingStyle=document.getElementById(styleId);existingStyle&&existingStyle.remove();const styleElement=document.createElement("style");return styleElement.id=styleId,styleElement.textContent=`:root { ${cssVars} }`,document.head.appendChild(styleElement),()=>{const element=document.getElementById(styleId);element&&element.remove()}},[theme,cssVarPrefix]);const contextValue=useMemo(()=>({theme:theme,mode:mode,setMode:changeMode,toggleMode:toggleMode,updateTheme:updateTheme,resetTheme:resetTheme}),[theme,mode,changeMode,toggleMode,updateTheme,resetTheme]);return jsx(ThemeContext.Provider,{value:contextValue,children:children})}function useTheme$1(){const context=useContext(ThemeContext);if(!context)throw new Error("useTheme must be used within a ThemeProvider");return context}function useThemeColors(){const{theme:theme}=useTheme$1();return theme.colors}function useThemeTypography(){const{theme:theme}=useTheme$1();return theme.typography}function useThemeSpacing(){const{theme:theme}=useTheme$1();return theme.spacing}function useThemeMode(){const{mode:mode,setMode:setMode,toggleMode:toggleMode}=useTheme$1();return{mode:mode,setMode:setMode,toggleMode:toggleMode}}function useCSSVariable(variableName,prefix="cc"){return`var(--${prefix}-${variableName})`}const Button=forwardRef(({variant:variant="primary",size:size="md",loading:loading=!1,fullWidth:fullWidth=!1,startIcon:startIcon,endIcon:endIcon,disabled:disabled,className:className="",children:children,style:style,...props},ref)=>{const{theme:theme}=useTheme$1(),baseStyle={display:"inline-flex",alignItems:"center",justifyContent:"center",fontFamily:createCSSVariable("font-family-sans"),fontWeight:createCSSVariable("font-weight-medium"),transitionProperty:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",transitionDuration:createCSSVariable("duration-200"),transitionTimingFunction:createCSSVariable("timing-in-out"),border:"none",cursor:"pointer",outline:"none",...style},sizeStyles={sm:{padding:theme.components.button.padding.xs,fontSize:createFontSizeVariable(theme.components.button.fontSize.xs),borderRadius:createCSSVariable(`border-radius-${theme.components.button.borderRadius}`),height:theme.components.button.height.xs},md:{padding:theme.components.button.padding.base,fontSize:createFontSizeVariable(theme.components.button.fontSize.base),borderRadius:createCSSVariable(`border-radius-${theme.components.button.borderRadius}`),height:theme.components.button.height.base},lg:{padding:theme.components.button.padding.lg,fontSize:createFontSizeVariable(theme.components.button.fontSize.lg),borderRadius:createCSSVariable(`border-radius-${theme.components.button.borderRadius}`),height:theme.components.button.height.lg}},variantStyles={primary:{backgroundColor:createColorVariable("primary","600"),color:createCSSVariable("text-inverse"),":hover":{backgroundColor:createColorVariable("primary","700")},":focus":{boxShadow:`0 0 0 2px ${createColorVariable("primary","500")}`}},secondary:{backgroundColor:createColorVariable("secondary","600"),color:createCSSVariable("text-inverse"),":hover":{backgroundColor:createColorVariable("secondary","700")},":focus":{boxShadow:`0 0 0 2px ${createColorVariable("secondary","500")}`}},outline:{backgroundColor:"transparent",border:`2px solid ${createCSSVariable("border-primary")}`,color:createCSSVariable("text-primary"),":hover":{backgroundColor:createCSSVariable("background-secondary")},":focus":{boxShadow:`0 0 0 2px ${createColorVariable("primary","500")}`}},ghost:{backgroundColor:"transparent",color:createCSSVariable("text-primary"),":hover":{backgroundColor:createCSSVariable("background-tertiary")},":focus":{boxShadow:`0 0 0 2px ${createColorVariable("primary","500")}`}},danger:{backgroundColor:createColorVariable("error","600"),color:createCSSVariable("text-inverse"),":hover":{backgroundColor:createColorVariable("error","700")},":focus":{boxShadow:`0 0 0 2px ${createColorVariable("error","500")}`}}},disabledStyle=undefined,widthStyle=undefined,combinedStyle={...baseStyle,...sizeStyles[size],...variantStyles[variant],...disabled||loading?{opacity:.5,cursor:"not-allowed",pointerEvents:"none"}:{},...fullWidth?{width:"100%"}:{}},LoadingSpinner=()=>jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});return jsxs("button",{ref:ref,className:className,style:combinedStyle,disabled:disabled||loading,...props,children:[loading&&jsx(LoadingSpinner,{}),!loading&&startIcon&&jsx("span",{style:{marginRight:createSpacingVariable("2")},children:startIcon}),children,!loading&&endIcon&&jsx("span",{style:{marginLeft:createSpacingVariable("2")},children:endIcon})]})});Button.displayName="Button";const Badge=({variant:variant="primary",size:size="md",rounded:rounded=!1,dot:dot=!1,className:className="",children:children,...props})=>{const baseClasses=undefined,variantClasses=undefined,sizeClasses=undefined,dotClasses={primary:"bg-blue-400",secondary:"bg-gray-400",success:"bg-green-400",warning:"bg-yellow-400",danger:"bg-red-400",info:"bg-indigo-400"},badgeClasses=[...["inline-flex items-center font-medium",rounded?"rounded-full":"rounded-md"],{primary:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-indigo-100 text-indigo-800"}[variant],{sm:"px-2 py-1 text-xs",md:"px-2.5 py-1.5 text-sm",lg:"px-3 py-2 text-base"}[size],className].filter(Boolean).join(" "),DotIndicator=()=>jsx("span",{className:`w-2 h-2 rounded-full mr-1.5 ${dotClasses[variant]}`,"aria-hidden":"true"});return jsxs("span",{className:badgeClasses,...props,children:[dot&&jsx(DotIndicator,{}),children]})},Avatar=({src:src,name:name="",size:size="md",status:status,square:square=!1,className:className="",alt:alt,...props})=>{const[imageError,setImageError]=useState(!1),[imageLoaded,setImageLoaded]=useState(!1),sizeClasses=undefined,statusClasses={online:"bg-green-400",offline:"bg-gray-400",away:"bg-yellow-400",busy:"bg-red-400"},statusSizeClasses={xs:"w-1.5 h-1.5",sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3",xl:"w-3.5 h-3.5","2xl":"w-4 h-4"},baseClasses=["inline-block relative",square?"rounded-lg":"rounded-full","bg-gray-100 overflow-hidden","ring-2 ring-white",{xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-base",lg:"w-12 h-12 text-lg",xl:"w-14 h-14 text-xl","2xl":"w-16 h-16 text-2xl"}[size]],getInitials=name=>name.split(" ").map(part=>part.charAt(0).toUpperCase()).join("").slice(0,2),handleImageError=()=>{setImageError(!0)},handleImageLoad=()=>{setImageLoaded(!0)},optimizedSrc=src?normalizeImageSrc(src):void 0,avatarClasses=[...baseClasses,className].filter(Boolean).join(" ");return jsxs("div",{className:avatarClasses,children:[optimizedSrc&&!imageError?jsx("img",{src:optimizedSrc,alt:alt||name,className:"w-full h-full object-cover",onError:handleImageError,onLoad:handleImageLoad,...props}):jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-gray-600 font-medium",children:getInitials(name)||"?"}),status&&jsx("span",{className:`absolute bottom-0 right-0 block ${statusSizeClasses[size]} ${statusClasses[status]} rounded-full ring-2 ring-white`,title:`Status: ${status}`,"aria-label":`User status: ${status}`})]})},Input=forwardRef(({label:label,error:error,helper:helper,type:type="text",size:size="md",fullWidth:fullWidth=!1,startAdornment:startAdornment,endAdornment:endAdornment,className:className="",containerClassName:containerClassName="",labelClassName:labelClassName="",errorClassName:errorClassName="",helperClassName:helperClassName="",disabled:disabled=!1,required:required=!1,id:id,...props},ref)=>{const inputId=id||`input-${Math.random().toString(36).substr(2,9)}`,sizeClasses=undefined,baseInputClasses=undefined,borderClasses=undefined,inputClasses=`\n    ${"\n    w-full\n    font-sans\n    text-gray-900\n    bg-white\n    border\n    rounded-lg\n    transition-all\n    duration-200\n    focus:outline-none\n    focus:ring-2\n    focus:ring-blue-500/20\n    disabled:opacity-50\n    disabled:cursor-not-allowed\n    disabled:bg-gray-50\n  "}\n    ${{sm:"h-8 px-2 text-sm",md:"h-10 px-3 text-sm",lg:"h-12 px-4 text-base"}[size]}\n    ${error?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-blue-500 hover:border-gray-400"}\n    ${startAdornment?"pl-8":""}\n    ${endAdornment?"pr-8":""}\n    ${className}\n  `.trim().replace(/\s+/g," ");return jsxs("div",{className:`${fullWidth?"w-full":"w-auto"} ${containerClassName}`,children:[label&&jsx("label",{htmlFor:inputId,className:`\n            block\n            text-sm\n            font-medium\n            text-gray-700\n            mb-2\n            font-sans\n            ${required?"after:content-['*'] after:text-red-500 after:ml-1":""}\n            ${disabled?"opacity-50":""}\n            ${labelClassName}\n          `.trim().replace(/\s+/g," "),children:label}),jsxs("div",{className:"relative",children:[startAdornment&&jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none",children:startAdornment}),jsx("input",{ref:ref,id:inputId,type:type,disabled:disabled,required:required,className:inputClasses,...props}),endAdornment&&jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:endAdornment})]}),error&&jsx("p",{className:`\n          mt-2\n          text-sm\n          text-red-500\n          font-sans\n          ${errorClassName}\n        `.trim().replace(/\s+/g," "),children:error}),helper&&!error&&jsx("p",{className:`\n          mt-2\n          text-sm\n          text-gray-500\n          font-sans\n          ${helperClassName}\n        `.trim().replace(/\s+/g," "),children:helper})]})});Input.displayName="Input";const Select=forwardRef(({options:options,value:value,onChange:onChange,placeholder:placeholder="선택해주세요",disabled:disabled=!1,label:label,error:error,helper:helper,size:size="md",fullWidth:fullWidth=!0,multiple:multiple=!1,searchable:searchable=!1,searchPlaceholder:searchPlaceholder="검색...",showIcon:showIcon=!1,showDescription:showDescription=!1,maxHeight:maxHeight="240px",noOptionsText:noOptionsText="옵션이 없습니다",className:className="",dropdownClassName:dropdownClassName="",labelClassName:labelClassName="",errorClassName:errorClassName="",helperClassName:helperClassName=""},ref)=>{const[isOpen,setIsOpen]=useState(!1),[searchTerm,setSearchTerm]=useState(""),dropdownRef=useRef(null),selectId=`select-${Math.random().toString(36).substr(2,9)}`,selectedOption=useMemo(()=>multiple?null:options.find(option=>option.value===value),[options,value,multiple]),sizeClasses={sm:"h-8 px-2 text-sm",md:"h-10 px-3 text-sm",lg:"h-12 px-4 text-base"};useEffect(()=>{const handleClickOutside=event=>{dropdownRef.current&&!dropdownRef.current.contains(event.target)&&(setIsOpen(!1),setSearchTerm(""))};return document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}},[]);const handleOptionClick=option=>{option.disabled||(onChange(option),multiple||(setIsOpen(!1),setSearchTerm("")))},toggleDropdown=()=>{disabled||(setIsOpen(!isOpen),setSearchTerm(""))},baseSelectClasses=undefined,borderClasses=undefined,selectClasses=`\n    ${"\n    w-full\n    font-sans\n    bg-white\n    border\n    rounded-lg\n    transition-all\n    duration-200\n    focus:outline-none\n    focus:ring-2\n    focus:ring-blue-500/20\n    disabled:opacity-50\n    disabled:cursor-not-allowed\n    disabled:bg-gray-50\n    flex\n    items-center\n    justify-between\n    cursor-pointer\n  "}\n    ${sizeClasses[size]}\n    ${error?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-blue-500 hover:border-gray-400"}\n    ${className}\n  `.trim().replace(/\s+/g," ");return jsxs("div",{ref:ref,className:(fullWidth?"w-full":"w-auto")+" relative",children:[label&&jsx("label",{htmlFor:selectId,className:`\n            block\n            text-sm\n            font-medium\n            text-gray-700\n            mb-2\n            font-sans\n            ${disabled?"opacity-50":""}\n            ${labelClassName}\n          `.trim().replace(/\s+/g," "),children:label}),jsxs("div",{ref:dropdownRef,id:selectId,role:"button",tabIndex:disabled?-1:0,"aria-expanded":isOpen,"aria-haspopup":"listbox",onClick:toggleDropdown,className:selectClasses,children:[jsx("div",{className:"flex items-center gap-2 flex-1 overflow-hidden",children:jsx("span",selectedOption?{className:"truncate text-gray-900",children:selectedOption.label}:{className:"text-gray-500 truncate",children:placeholder})}),jsx("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 flex-shrink-0 "+(isOpen?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),isOpen&&jsx("div",{className:`absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50 overflow-hidden ${dropdownClassName}`,children:jsx("div",{className:"overflow-y-auto",style:{maxHeight:maxHeight},role:"listbox",children:0===options.length?jsx("div",{className:"px-3 py-8 text-center text-gray-500 text-sm",children:noOptionsText}):options.map(option=>{const isSelected=option.value===value;return jsx("button",{type:"button",role:"option","aria-selected":isSelected,onClick:()=>handleOptionClick(option),disabled:option.disabled,className:`\n                      w-full px-3 py-2 text-left flex items-center gap-2 text-sm cursor-pointer\n                      transition-colors duration-150\n                      ${option.disabled?"opacity-50 cursor-not-allowed bg-gray-50":isSelected?"bg-blue-50 text-blue-600":"hover:bg-gray-100 text-gray-900"}\n                      border-b border-gray-100 last:border-b-0\n                    `.trim().replace(/\s+/g," "),children:jsxs("div",{className:"flex-1 min-w-0",children:[jsx("div",{className:"truncate",children:option.label}),showDescription&&option.description&&jsx("div",{className:"text-xs text-gray-500 mt-1 truncate",children:option.description})]})},option.id)})})}),error&&jsx("p",{className:`\n          mt-2\n          text-sm\n          text-red-500\n          font-sans\n          ${errorClassName}\n        `.trim().replace(/\s+/g," "),children:error}),helper&&!error&&jsx("p",{className:`\n          mt-2\n          text-sm\n          text-gray-500\n          font-sans\n          ${helperClassName}\n        `.trim().replace(/\s+/g," "),children:helper})]})});Select.displayName="Select";const Checkbox=forwardRef(({checked:checked=!1,onChange:onChange,label:label,error:error,helper:helper,size:size="md",indeterminate:indeterminate=!1,labelPosition:labelPosition="right",disabled:disabled=!1,className:className="",containerClassName:containerClassName="",labelClassName:labelClassName="",errorClassName:errorClassName="",helperClassName:helperClassName="",id:id,...props},ref)=>{const checkboxId=id||`checkbox-${Math.random().toString(36).substr(2,9)}`,sizeClasses=undefined,handleChange=event=>{onChange?.(event.target.checked,event)},baseCheckboxClasses=undefined,borderClasses=undefined,checkboxClasses=`\n    ${"\n    text-blue-600\n    bg-white\n    border-2\n    rounded\n    transition-all\n    duration-200\n    focus:outline-none\n    focus:ring-2\n    focus:ring-blue-500/20\n    focus:border-blue-500\n    disabled:opacity-50\n    disabled:cursor-not-allowed\n    disabled:bg-gray-50\n  "}\n    ${{sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"}[size]}\n    ${error?"border-red-500":"border-gray-300 hover:border-blue-500"}\n    ${className}\n  `.trim().replace(/\s+/g," "),checkboxElement=jsx("input",{ref:ref,id:checkboxId,type:"checkbox",checked:checked,onChange:handleChange,disabled:disabled,className:checkboxClasses,...props}),labelElement=label&&jsx("label",{htmlFor:checkboxId,className:`\n        text-gray-700\n        text-xs sm:text-sm\n        font-normal\n        font-sans\n        select-none\n        ${disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n        ${labelClassName}\n      `.trim().replace(/\s+/g," "),children:label});return jsxs("div",{className:containerClassName,children:[jsxs("div",{className:"flex items-center gap-2 "+("left"===labelPosition?"flex-row-reverse":""),children:[checkboxElement,labelElement]}),error&&jsx("p",{className:`\n          mt-2\n          text-sm\n          text-red-500\n          font-sans\n          ${errorClassName}\n        `.trim().replace(/\s+/g," "),children:error}),helper&&!error&&jsx("p",{className:`\n          mt-2\n          text-sm\n          text-gray-500\n          font-sans\n          ${helperClassName}\n        `.trim().replace(/\s+/g," "),children:helper})]})});Checkbox.displayName="Checkbox";const Radio=forwardRef(({checked:checked=!1,onChange:onChange,name:name,value:value,label:label,error:error,helper:helper,size:size="md",labelPosition:labelPosition="right",disabled:disabled=!1,className:className="",containerClassName:containerClassName="",labelClassName:labelClassName="",errorClassName:errorClassName="",helperClassName:helperClassName="",children:children,id:id,...props},ref)=>{const radioId=id||`radio-${Math.random().toString(36).substr(2,9)}`,sizeClasses={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},dotSizeClasses={sm:"w-1.5 h-1.5",md:"w-2.5 h-2.5",lg:"w-3 h-3"},handleChange=undefined,labelText=children||label,radioElement=jsxs("div",{className:"relative inline-flex items-center",children:[jsx("input",{ref:ref,id:radioId,type:"radio",name:name,value:value,checked:checked,onChange:event=>{onChange?.(event.target.value,event)},disabled:disabled,className:"sr-only",...props}),jsx("span",{className:`\n          flex-shrink-0 rounded-full flex items-center justify-center\n          border-2 transition-all duration-200\n          ${sizeClasses[size]}\n          ${checked?error?"border-red-500 bg-red-500":"border-blue-600 bg-blue-600":error?"border-red-500":"border-gray-300 hover:border-blue-600"}\n          ${disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n          ${className}\n        `.trim().replace(/\s+/g," "),children:jsx("span",{className:`\n            rounded-full transition-all duration-200 bg-white\n            ${dotSizeClasses[size]}\n            ${checked?"opacity-100 scale-100":"opacity-0 scale-50"}\n          `.trim().replace(/\s+/g," ")})})]}),labelElement=labelText&&jsx("label",{htmlFor:radioId,className:`\n        text-gray-700\n        text-xs sm:text-sm\n        font-normal\n        font-sans\n        whitespace-nowrap\n        select-none\n        ${disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n        ${labelClassName}\n      `.trim().replace(/\s+/g," "),children:labelText});return jsxs("div",{className:containerClassName,children:[jsxs("div",{className:"inline-flex items-center gap-2 "+("left"===labelPosition?"flex-row-reverse":""),children:[radioElement,labelElement]}),error&&jsx("p",{className:`\n          mt-2\n          text-sm\n          text-red-500\n          font-sans\n          ${errorClassName}\n        `.trim().replace(/\s+/g," "),children:error}),helper&&!error&&jsx("p",{className:`\n          mt-2\n          text-sm\n          text-gray-500\n          font-sans\n          ${helperClassName}\n        `.trim().replace(/\s+/g," "),children:helper})]})});Radio.displayName="Radio";const Switch=forwardRef(({checked:checked=!1,onChange:onChange,label:label,error:error,helper:helper,size:size="md",labelPosition:labelPosition="right",onText:onText,offText:offText,disabled:disabled=!1,className:className="",containerClassName:containerClassName="",labelClassName:labelClassName="",errorClassName:errorClassName="",helperClassName:helperClassName="",id:id,...props},ref)=>{const switchId=id||`switch-${Math.random().toString(36).substr(2,9)}`,sizeClasses=undefined,handleChange=event=>{onChange?.(event.target.checked,event)},currentSize={sm:{track:"w-8 h-4",thumb:"w-3 h-3",translate:"translate-x-4",text:"text-xs px-1"},md:{track:"w-10 h-5",thumb:"w-4 h-4",translate:"translate-x-5",text:"text-xs px-1.5"},lg:{track:"w-12 h-6",thumb:"w-5 h-5",translate:"translate-x-6",text:"text-sm px-2"}}[size],trackClasses=`\n    relative inline-flex items-center\n    ${currentSize.track}\n    rounded-full\n    transition-colors duration-200 ease-in-out\n    focus-within:outline-none\n    focus-within:ring-2\n    focus-within:ring-blue-500/20\n    ${checked?error?"bg-red-500":"bg-blue-600":error?"bg-red-200":"bg-gray-300"}\n    ${disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n    ${className}\n  `.trim().replace(/\s+/g," "),thumbClasses=`\n    inline-block\n    ${currentSize.thumb}\n    bg-white\n    rounded-full\n    shadow\n    transform\n    transition-transform duration-200 ease-in-out\n    ${checked?currentSize.translate:"translate-x-0.5"}\n  `.trim().replace(/\s+/g," "),switchElement=jsxs("div",{className:"relative inline-flex",children:[jsx("input",{ref:ref,id:switchId,type:"checkbox",checked:checked,onChange:handleChange,disabled:disabled,className:"sr-only",...props}),jsxs("label",{htmlFor:switchId,className:trackClasses,children:[(onText||offText)&&jsx("span",{className:`\n            absolute inset-0 flex items-center justify-center\n            font-sans font-medium text-white\n            ${currentSize.text}\n            pointer-events-none\n          `,children:checked?onText:offText}),jsx("span",{className:thumbClasses})]})]}),labelElement=label&&jsx("label",{htmlFor:switchId,className:`\n        text-gray-700\n        text-xs sm:text-sm\n        font-normal\n        font-sans\n        select-none\n        ${disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n        ${labelClassName}\n      `.trim().replace(/\s+/g," "),children:label});return jsxs("div",{className:containerClassName,children:[jsxs("div",{className:"inline-flex items-center gap-3 "+("left"===labelPosition?"flex-row-reverse":""),children:[switchElement,labelElement]}),error&&jsx("p",{className:`\n          mt-2\n          text-sm\n          text-red-500\n          font-sans\n          ${errorClassName}\n        `.trim().replace(/\s+/g," "),children:error}),helper&&!error&&jsx("p",{className:`\n          mt-2\n          text-sm\n          text-gray-500\n          font-sans\n          ${helperClassName}\n        `.trim().replace(/\s+/g," "),children:helper})]})});Switch.displayName="Switch";const TextArea=forwardRef(({label:label,error:error,helper:helper,size:size="md",fullWidth:fullWidth=!1,autoResize:autoResize=!1,minHeight:minHeight=80,maxHeight:maxHeight=300,maxLength:maxLength,showCount:showCount=!1,disabled:disabled=!1,required:required=!1,className:className="",containerClassName:containerClassName="",labelClassName:labelClassName="",errorClassName:errorClassName="",helperClassName:helperClassName="",countClassName:countClassName="",value:value,onChange:onChange,id:id,...props},ref)=>{const textareaId=id||`textarea-${Math.random().toString(36).substr(2,9)}`,[textareaHeight,setTextareaHeight]=useState(minHeight),sizeClasses={sm:"px-2 py-1.5 text-sm",md:"px-3 py-2 text-sm",lg:"px-4 py-3 text-base"},handleAutoResize=useCallback(element=>{if(!autoResize)return;element.style.height="auto";const scrollHeight=element.scrollHeight,newHeight=Math.min(Math.max(scrollHeight,minHeight),maxHeight);setTextareaHeight(newHeight),element.style.height=`${newHeight}px`},[autoResize,minHeight,maxHeight]),handleChange=event=>{maxLength&&event.target.value.length>maxLength||(onChange?.(event),autoResize&&handleAutoResize(event.target))},baseTextareaClasses=undefined,borderClasses=undefined,textareaClasses=`\n    ${"\n    w-full\n    font-sans\n    text-gray-900\n    bg-white\n    border\n    rounded-lg\n    transition-all\n    duration-200\n    focus:outline-none\n    focus:ring-2\n    focus:ring-blue-500/20\n    disabled:opacity-50\n    disabled:cursor-not-allowed\n    disabled:bg-gray-50\n    resize-none\n  "}\n    ${sizeClasses[size]}\n    ${error?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-blue-500 hover:border-gray-400"}\n    ${autoResize?"resize-none":"resize-y"}\n    ${className}\n  `.trim().replace(/\s+/g," "),currentLength="string"==typeof value?value.length:0,isOverLimit=!!maxLength&&currentLength>maxLength;return jsxs("div",{className:`${fullWidth?"w-full":"w-auto"} ${containerClassName}`,children:[jsxs("div",{className:"flex justify-between items-center mb-2",children:[label&&jsx("label",{htmlFor:textareaId,className:`\n              block\n              text-sm\n              font-medium\n              text-gray-700\n              font-sans\n              ${required?"after:content-['*'] after:text-red-500 after:ml-1":""}\n              ${disabled?"opacity-50":""}\n              ${labelClassName}\n            `.trim().replace(/\s+/g," "),children:label}),showCount&&(maxLength||currentLength>0)&&jsxs("span",{className:`\n            text-sm\n            font-sans\n            ${isOverLimit?"text-red-500":currentLength/(maxLength||100)>.8?"text-orange-500":"text-gray-500"}\n            ${countClassName}\n          `.trim().replace(/\s+/g," "),children:[currentLength,maxLength&&`/${maxLength}`]})]}),jsx("textarea",{ref:ref,id:textareaId,value:value,onChange:handleChange,disabled:disabled,required:required,maxLength:maxLength,className:textareaClasses,style:autoResize?{height:textareaHeight,minHeight:minHeight,maxHeight:maxHeight}:{minHeight:minHeight},...props}),jsxs("div",{className:"flex justify-between items-start mt-2",children:[jsxs("div",{className:"flex-1",children:[error&&jsx("p",{className:`\n              text-sm\n              text-red-500\n              font-sans\n              ${errorClassName}\n            `.trim().replace(/\s+/g," "),children:error}),helper&&!error&&jsx("p",{className:`\n              text-sm\n              text-gray-500\n              font-sans\n              ${helperClassName}\n            `.trim().replace(/\s+/g," "),children:helper})]}),showCount&&!label&&(maxLength||currentLength>0)&&jsxs("span",{className:`\n            text-sm\n            font-sans\n            ml-2\n            flex-shrink-0\n            ${isOverLimit?"text-red-500":currentLength/(maxLength||100)>.8?"text-orange-500":"text-gray-500"}\n            ${countClassName}\n          `.trim().replace(/\s+/g," "),children:[currentLength,maxLength&&`/${maxLength}`]})]})]})});function Skeleton({variant:variant="rectangular",width:width,height:height,animated:animated=!0,light:light=!1,className:className="",style:style,...props}){const variantClasses={rectangular:"rounded-md",circular:"rounded-full",rounded:"rounded-lg",text:"rounded-sm"},getDefaultStyles=variant=>{switch(variant){case"rectangular":default:return{width:width||"100%",height:height||"1.2rem"};case"circular":return{width:width||"2.5rem",height:height||width||"2.5rem"};case"rounded":return{width:width||"100%",height:height||"1.5rem"};case"text":return{width:width||"100%",height:height||"1rem"}}},backgroundClass=light?"bg-gray-100":"bg-gray-200 dark:bg-gray-700",combinedStyle={...getDefaultStyles(variant),...style};return jsx("div",{className:`\n        ${backgroundClass}\n        ${variantClasses[variant]}\n        ${animated?"animate-pulse":""}\n        ${className}\n      `.trim().replace(/\s+/g," "),style:combinedStyle,...props})}TextArea.displayName="TextArea";const SkeletonText=({lines:lines=3,className:className="",...props})=>jsx("div",{className:`space-y-2 ${className}`,...props,children:Array.from({length:lines}).map((_,index)=>jsx(Skeleton,{variant:"text",width:index===lines-1?"75%":"100%",height:"0.875rem"},index))}),SkeletonAvatar=({size:size="md",...props})=>{const sizes={sm:"2rem",md:"2.5rem",lg:"3rem",xl:"4rem"};return jsx(Skeleton,{variant:"circular",width:sizes[size],height:sizes[size],...props})},SkeletonButton=({variant:buttonVariant="md",...props})=>{const getButtonSize=undefined,buttonSize=(size=>{switch(size){case"sm":return{width:"4rem",height:"2rem"};case"lg":return{width:"8rem",height:"3rem"};default:return{width:"6rem",height:"2.5rem"}}})(buttonVariant);return jsx(Skeleton,{variant:"rounded",width:buttonSize.width,height:buttonSize.height,...props})},SkeletonCard=({...props})=>jsxs("div",{className:"p-4 border border-gray-200 rounded-lg space-y-4",...props,children:[jsxs("div",{className:"flex items-center space-x-3",children:[jsx(SkeletonAvatar,{size:"md"}),jsxs("div",{className:"flex-1 space-y-2",children:[jsx(Skeleton,{variant:"text",width:"60%"}),jsx(Skeleton,{variant:"text",width:"40%"})]})]}),jsx(SkeletonText,{lines:3}),jsxs("div",{className:"flex space-x-2",children:[jsx(SkeletonButton,{variant:"sm"}),jsx(SkeletonButton,{variant:"sm"})]})]});function BoardContainer({children:children,className:className=""}){return jsx("div",{className:`col-span-12 lg:col-span-7 lg:col-start-2 flex flex-col gap-2 justify-center items-center ${className}`.trim(),children:children})}function BoardHeader({boardName:boardName,category:category,totalCount:totalCount,isGlobalSearch:isGlobalSearch,searchText:searchText,totalPages:totalPages}){const pathname=usePathname(),searchParams=useSearchParams(),searchParamsState=Object.fromEntries(searchParams.entries()),[selectedCategory,setSelectedCategory]=useState(searchParamsState.categoryId||null);useEffect(()=>{setSelectedCategory(searchParamsState.categoryId||null)},[searchParamsState.categoryId]);const handleCategoryClick=categoryId=>{setSelectedCategory(categoryId);const newParams={...searchParamsState};newParams.page="1",categoryId?(newParams.categoryId=categoryId,window.location.href=`${pathname}?${new URLSearchParams(newParams).toString()}`):(delete newParams.categoryId,window.location.href=`${pathname}?${new URLSearchParams(newParams).toString()}`)};return jsxs("div",{className:"w-full p-0 flex flex-col flex-wrap overflow-x-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[boardName&&jsx("div",{className:"text-xl font-nexon font-bold text-nowrap",children:boardName}),jsxs("div",{className:"flex items-center flex-wrap gap-1 min-w-0 w-full overflow-x-auto whitespace-nowrap justify-start sm:justify-end",children:[category.length>0&&jsxs(Fragment,{children:[jsx("div",{className:`cursor-pointer w-16 sm:w-24 h-10 flex items-center justify-center text-sm font-nexon font-bold rounded-lg transition\n                  ${null===selectedCategory?"bg-[#FA7D1A] text-white":"text-gray-400 hover:text-primary"}\n                `,onClick:()=>handleCategoryClick(null),children:"전체"}),jsx("span",{className:"mx-1 text-gray-300 text-lg",children:"|"})]},"board-header-all"),category.map((e,i)=>{const isLast=i===category.length-1;return jsxs(Fragment,{children:[jsx("div",{className:`cursor-pointer w-16 sm:w-24 h-10 flex items-center justify-center text-sm font-nexon font-bold rounded-lg transition\n                    ${selectedCategory===String(e.id)?"bg-[#FA7D1A] text-white":"text-gray-400 hover:text-primary"}\n                  `,onClick:()=>handleCategoryClick(String(e.id)),children:e.name}),!isLast&&jsx("span",{className:"sm:mx-1 text-gray-300 text-lg",children:"|"})]},`board-header-${e.id}`)})]})]}),isGlobalSearch&&searchText&&jsxs("div",{className:"w-full text-left text-xs sm:text-sm font-nexon text-text-tertiary mt-3",children:[jsxs("span",{className:"text-primary font-medium",children:['"',searchText,'"']})," ","검색결과 : 게시물 ",totalCount.toLocaleString(),"개 / 총 ",totalPages,"페이지"]})]})}function PaginationItem({number:number,isActive:isActive,onClick:onClick}){return jsx("button",{onClick:onClick,className:"w-8 h-8 sm:w-9 sm:h-9 rounded-lg flex justify-center items-center text-sm font-medium transition-colors\n        "+(isActive?"bg-primary text-white":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:number})}function BoardPagination({currentPage:currentPage,totalPages:totalPages,onPageChange:onPageChange,className:className=""}){const pathname=usePathname(),searchParams=useSearchParams();useCallback(page=>{const params=new URLSearchParams(searchParams.toString());return params.set("page",page.toString()),`${pathname}?${params.toString()}`},[pathname,searchParams]);const getPageRange=()=>{const range=[],maxVisiblePages=5;if(totalPages<=5){for(let i=1;i<=totalPages;i++)range.push(i);return range}let start=Math.max(1,currentPage-2),end=Math.min(totalPages,currentPage+2);end-start+1<5&&(1===start?end=Math.min(totalPages,start+5-1):end===totalPages&&(start=Math.max(1,end-5+1)));for(let i=start;i<=end;i++)range.push(i);return range},ArrowButton=({direction:direction,onClick:onClick,disabled:disabled,isDouble:isDouble=!1})=>jsx("button",{onClick:onClick,disabled:disabled,className:"w-8 h-8 sm:w-9 sm:h-9 rounded-lg flex justify-center items-center transition-colors\n        "+(disabled?"bg-gray-100 text-gray-300 cursor-not-allowed":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200 cursor-pointer"),"aria-label":isDouble?"left"===direction?"첫 페이지로 이동":"마지막 페이지로 이동":"left"===direction?"이전 페이지로 이동":"다음 페이지로 이동",children:jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:jsx("path","left"===direction?isDouble?{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6 1.41-1.41zM6 6h2v12H6V6z"}:{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}:isDouble?{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6-1.41 1.41zM18 6v12h-2V6h2z"}:{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})})});return jsxs("div",{className:`flex justify-center items-center gap-1 my-4 ${className}`.trim(),children:[jsx(ArrowButton,{direction:"left",isDouble:!0,onClick:()=>onPageChange(1),disabled:1===currentPage}),jsx(ArrowButton,{direction:"left",onClick:()=>onPageChange(currentPage-1),disabled:1===currentPage}),jsx("div",{className:"flex items-center gap-1 mx-2",children:getPageRange().map(page=>jsx(PaginationItem,{number:page,isActive:currentPage===page,onClick:()=>onPageChange(page),isVisible:!0},page))}),jsx(ArrowButton,{direction:"right",onClick:()=>onPageChange(currentPage+1),disabled:currentPage===totalPages}),jsx(ArrowButton,{direction:"right",isDouble:!0,onClick:()=>onPageChange(totalPages),disabled:currentPage===totalPages})]})}const baseURL=process.env.NEXT_PUBLIC_API_URL,axiosInstance=axios.create({baseURL:baseURL,timeout:36e5,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});var CommonConstants,CommonStatus;axiosInstance.interceptors.request.use(async config=>{if(!config.metadata?.skipLoader){const useMiniLoader=config.metadata?.useMiniLoader;config.metadata}if(config.data instanceof FormData&&config.headers&&delete config.headers["Content-Type"],"undefined"!=typeof window)try{const sessionCookie=document.cookie.split("; ").find(row=>row.startsWith("sb-access-token="))?.split("=")[1];if(sessionCookie){const decodedSession=decodeURIComponent(sessionCookie),sessionData=JSON.parse(decodedSession),accessToken=sessionData?.access_token;if(accessToken){const{decodeJWTPayload:decodeJWTPayload,isTokenExpired:isTokenExpired,removeExpiredTokenFromCookie:removeExpiredTokenFromCookie}=await Promise.resolve().then(function(){return jwtUtil}),payload=decodeJWTPayload(accessToken);payload&&!isTokenExpired(payload)?config.headers&&(config.headers.Authorization=`Bearer ${accessToken}`):(console.log("🗑️ axios 인터셉터: 만료된 토큰 감지, 쿠키에서 제거"),removeExpiredTokenFromCookie())}}}catch(error){try{const{removeExpiredTokenFromCookie:removeExpiredTokenFromCookie}=await Promise.resolve().then(function(){return jwtUtil});removeExpiredTokenFromCookie()}catch(importError){console.error("JWT 유틸리티 import 실패:",importError)}}return config}),axiosInstance.interceptors.response.use(async response=>{const config=response.config;if(config.metadata?.skipLoader||config.metadata,"N"===response.data?.successOrNot){const statusCode=response.data?.statusCode,errorMessage=response.data?.message||response.data?.data;if("FORBIDDEN"===statusCode&&"string"==typeof errorMessage&&(errorMessage.includes("해당 게시글에 접근하려면 로그인이 필요")||errorMessage.includes("로그인이 필요한 게시글")||errorMessage.includes("로그인이 필요한 게시판"))){const{clientSupabase:clientSupabase}=await Promise.resolve().then(function(){return client}),{data:{session:session}}=await clientSupabase.auth.getSession();if(!session||!session.access_token){const event=new CustomEvent("auth-error",{detail:{type:"AUTH_REQUIRED",message:errorMessage}});window.dispatchEvent(event)}}}return response},async error=>{const config=error.config;if((401===error.response?.status||403===error.response?.status)&&!error.config._retried)try{console.log("🔄 axios: 401/403 에러 감지, 토큰 갱신 시도");const{clientSupabase:clientSupabase}=await Promise.resolve().then(function(){return client}),{data:{session:session},error:sessionError}=await clientSupabase.auth.getSession();if(sessionError||!session)throw console.error("❌ axios: 세션 확인 실패 또는 세션 없음"),new Error("세션이 유효하지 않습니다.");const{data:refreshData,error:refreshError}=await clientSupabase.auth.refreshSession();if(refreshError||!refreshData.session)throw console.error("❌ axios: 토큰 갱신 실패"),new Error("토큰 갱신에 실패했습니다.");console.log("✅ axios: 토큰 갱신 성공");const originalConfig=error.config;return originalConfig._retried=!0,originalConfig.headers.Authorization=`Bearer ${refreshData.session.access_token}`,console.log("🔄 axios: 갱신된 토큰으로 요청 재시도"),axiosInstance(originalConfig)}catch(refreshError){console.error("❌ axios: 토큰 갱신 과정에서 오류:",refreshError);const{clientSupabase:clientSupabase}=await Promise.resolve().then(function(){return client});await clientSupabase.auth.signOut();const event=new CustomEvent("auth-error",{detail:{type:"TOKEN_INVALID"}});window.dispatchEvent(event)}return Promise.reject(error)}),function(CommonConstants){CommonConstants.SESSION_NAME="SESSION_NAME",CommonConstants.YES_FLAG="Y",CommonConstants.NO_FLAG="N",CommonConstants.NA="NA"}(CommonConstants||(CommonConstants={})),function(CommonStatus){CommonStatus[CommonStatus.SUCCESS=200]="SUCCESS",CommonStatus[CommonStatus.BAD_REQUEST=400]="BAD_REQUEST",CommonStatus[CommonStatus.FAIL=400]="FAIL",CommonStatus[CommonStatus.UNAUTHORIZED=401]="UNAUTHORIZED",CommonStatus[CommonStatus.FORBIDDEN=403]="FORBIDDEN",CommonStatus[CommonStatus.NOT_FOUND=404]="NOT_FOUND",CommonStatus[CommonStatus.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",CommonStatus[CommonStatus.BAD_GATEWAY=502]="BAD_GATEWAY",CommonStatus[CommonStatus.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",CommonStatus[CommonStatus.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT"}(CommonStatus||(CommonStatus={}));class BaseService{constructor(baseUrl="",defaultHeaders={}){this.baseUrl=baseUrl,this.defaultHeaders={"Content-Type":"application/json",...defaultHeaders}}handleError(error){if(error instanceof AxiosError){const status=undefined,message=undefined;return{successOrNot:"N",statusCode:error.response?.status||CommonStatus.INTERNAL_SERVER_ERROR,message:error.response?.data?.message||error.message||"An error occurred",data:null}}return{successOrNot:"N",statusCode:CommonStatus.INTERNAL_SERVER_ERROR,message:error.message||"Unknown error occurred",data:null}}buildUrl(endpoint){return endpoint.startsWith("http")?endpoint:`${this.baseUrl}${endpoint.startsWith("/")?endpoint:`/${endpoint}`}`}prepareConfig(options){const config={headers:{...this.defaultHeaders,...options?.headers},params:options?.params,timeout:options?.timeout};return(options?.skipLoader||options?.useMiniLoader||options?.loaderText)&&(config.metadata={skipLoader:options.skipLoader,useMiniLoader:options.useMiniLoader,loaderText:options.loaderText}),config}async get(endpoint,options){try{const url=this.buildUrl(endpoint),config=this.prepareConfig(options),response=undefined;return(await axiosInstance.get(url,config)).data}catch(error){return this.handleError(error)}}async post(endpoint,data,options){try{const url=this.buildUrl(endpoint),config=this.prepareConfig(options),response=undefined;return(await axiosInstance.post(url,data,config)).data}catch(error){return this.handleError(error)}}async put(endpoint,data,options){try{const url=this.buildUrl(endpoint),config=this.prepareConfig(options),response=undefined;return(await axiosInstance.put(url,data,config)).data}catch(error){return this.handleError(error)}}async patch(endpoint,data,options){try{const url=this.buildUrl(endpoint),config=this.prepareConfig(options),response=undefined;return(await axiosInstance.patch(url,data,config)).data}catch(error){return this.handleError(error)}}async delete(endpoint,options){try{const url=this.buildUrl(endpoint),config=this.prepareConfig(options),response=undefined;return(await axiosInstance.delete(url,config)).data}catch(error){return this.handleError(error)}}async getSilent(endpoint,options){return this.get(endpoint,{...options,skipLoader:!0})}async postSilent(endpoint,data,options){return this.post(endpoint,data,{...options,skipLoader:!0})}async putSilent(endpoint,data,options){return this.put(endpoint,data,{...options,skipLoader:!0})}async patchSilent(endpoint,data,options){return this.patch(endpoint,data,{...options,skipLoader:!0})}async deleteSilent(endpoint,options){return this.delete(endpoint,{...options,skipLoader:!0})}async getMini(endpoint,text,options){return this.get(endpoint,{...options,useMiniLoader:!0,loaderText:text})}async postMini(endpoint,data,text,options){return this.post(endpoint,data,{...options,useMiniLoader:!0,loaderText:text})}async putMini(endpoint,data,text,options){return this.put(endpoint,data,{...options,useMiniLoader:!0,loaderText:text})}async patchMini(endpoint,data,text,options){return this.patch(endpoint,data,{...options,useMiniLoader:!0,loaderText:text})}async deleteMini(endpoint,text,options){return this.delete(endpoint,{...options,useMiniLoader:!0,loaderText:text})}}const baseService={async get(endpoint){const service=undefined;return(new BaseService).get(endpoint)},async post(endpoint,data){const service=undefined;return(new BaseService).post(endpoint,data)},async put(endpoint,data){const service=undefined;return(new BaseService).put(endpoint,data)},async patch(endpoint,data){const service=undefined;return(new BaseService).patch(endpoint,data)},async delete(endpoint){const service=undefined;return(new BaseService).delete(endpoint)},async getSilent(endpoint){const service=undefined;return(new BaseService).getSilent(endpoint)},async postSilent(endpoint,data){const service=undefined;return(new BaseService).postSilent(endpoint,data)},async putSilent(endpoint,data){const service=undefined;return(new BaseService).putSilent(endpoint,data)},async deleteSilent(endpoint){const service=undefined;return(new BaseService).deleteSilent(endpoint)},async getMini(endpoint,text){const service=undefined;return(new BaseService).getMini(endpoint,text)},async postMini(endpoint,data,text){const service=undefined;return(new BaseService).postMini(endpoint,data,text)},async putMini(endpoint,data,text){const service=undefined;return(new BaseService).putMini(endpoint,data,text)},async patchMini(endpoint,data,text){const service=undefined;return(new BaseService).patchMini(endpoint,data,text)},async deleteMini(endpoint,text){const service=undefined;return(new BaseService).deleteMini(endpoint,text)}};class UserService extends BaseService{constructor(options){super(options?.baseUrl||"/api/user",options?.defaultHeaders)}async getMyInfo(){return this.getMini("/me","사용자 정보 확인중...")}async getMyPermission(){return this.get("/me/permission")}async getMyPoint(){return this.getMini("/me/point","포인트 조회중...")}async getRealtimeUser(){return this.getSilent("/realtime")}async getUserId(){return this.get("/id")}async getUserUuid(){return this.get("/uuid")}async updateUserProfile(data){return this.patch("/profile",data)}async refreshMyInfo(){return this.get("/me",{headers:{"Cache-Control":"no-cache"}})}async getUserInfo(options={}){const params={};return options.nickname&&(params.nickname=options.nickname),options.needPoint&&(params.needPoint="true"),options.includePermissions&&(params.includePermissions="true"),this.getMini("/","사용자 정보 조회중...",{params:params})}async checkUserIdExist(userId){return this.post("/check/id",{userId:userId})}async checkNicknameExist(nickname){return this.post("/check/nickname",{nickname:nickname})}async getUserById(userId){return this.get(`/${userId}`)}async getUsersByIds(userIds){return this.post("/batch",{userIds:userIds})}async searchUsers(keyword,page=1,pageSize=10){return this.get("/search",{params:{keyword:keyword,page:page,pageSize:pageSize}})}async updateUserLevel(userId,level){return this.patch(`/${userId}/level`,{level:level})}async updateUserBanStatus(userId,isBanned,reason){return this.patch(`/${userId}/ban-status`,{isBanned:isBanned,reason:reason})}}const userService={getMyInfo(){const service=undefined;return(new UserService).getMyInfo()},getMyPermission(){const service=undefined;return(new UserService).getMyPermission()},getMyPoint(){const service=undefined;return(new UserService).getMyPoint()},getRealtimeUser(){const service=undefined;return(new UserService).getRealtimeUser()},getUserId(){const service=undefined;return(new UserService).getUserId()},getUserUuid(){const service=undefined;return(new UserService).getUserUuid()},updateUserProfile(profileImage){const service=undefined;return(new UserService).updateUserProfile({profileImage:profileImage})},refreshMyInfo(){const service=undefined;return(new UserService).refreshMyInfo()},getUserInfo(nickname,needPoint=!1){const service=undefined;return(new UserService).getUserInfo({nickname:nickname,needPoint:needPoint})},checkUserIdExist(userId){const service=undefined;return(new UserService).checkUserIdExist(userId)},checkNicknameExist(nickname){const service=undefined;return(new UserService).checkNicknameExist(nickname)}};var withSelector={exports:{}},useSyncExternalStoreWithSelector_production={},hasRequiredUseSyncExternalStoreWithSelector_production;function requireUseSyncExternalStoreWithSelector_production(){if(hasRequiredUseSyncExternalStoreWithSelector_production)return useSyncExternalStoreWithSelector_production;hasRequiredUseSyncExternalStoreWithSelector_production=1;var React=React__default;function is(x,y){return x===y&&(0!==x||1/x==1/y)||x!=x&&y!=y}var objectIs="function"==typeof Object.is?Object.is:is,useSyncExternalStore=React.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;return useSyncExternalStoreWithSelector_production.useSyncExternalStoreWithSelector=function(subscribe,getSnapshot,getServerSnapshot,selector,isEqual){var instRef=useRef(null);if(null===instRef.current){var inst={hasValue:!1,value:null};instRef.current=inst}else inst=instRef.current;instRef=useMemo(function(){function memoizedSelector(nextSnapshot){if(!hasMemo){if(hasMemo=!0,memoizedSnapshot=nextSnapshot,nextSnapshot=selector(nextSnapshot),void 0!==isEqual&&inst.hasValue){var currentSelection=inst.value;if(isEqual(currentSelection,nextSnapshot))return memoizedSelection=currentSelection}return memoizedSelection=nextSnapshot}if(currentSelection=memoizedSelection,objectIs(memoizedSnapshot,nextSnapshot))return currentSelection;var nextSelection=selector(nextSnapshot);return void 0!==isEqual&&isEqual(currentSelection,nextSelection)?(memoizedSnapshot=nextSnapshot,currentSelection):(memoizedSnapshot=nextSnapshot,memoizedSelection=nextSelection)}var hasMemo=!1,memoizedSnapshot,memoizedSelection,maybeGetServerSnapshot=void 0===getServerSnapshot?null:getServerSnapshot;return[function(){return memoizedSelector(getSnapshot())},null===maybeGetServerSnapshot?void 0:function(){return memoizedSelector(maybeGetServerSnapshot())}]},[getSnapshot,getServerSnapshot,selector,isEqual]);var value=useSyncExternalStore(subscribe,instRef[0],instRef[1]);return useEffect(function(){inst.hasValue=!0,inst.value=value},[value]),useDebugValue(value),value},useSyncExternalStoreWithSelector_production}var useSyncExternalStoreWithSelector_development={},hasRequiredUseSyncExternalStoreWithSelector_development;function requireUseSyncExternalStoreWithSelector_development(){return hasRequiredUseSyncExternalStoreWithSelector_development||(hasRequiredUseSyncExternalStoreWithSelector_development=1,"production"!==process.env.NODE_ENV&&function(){function is(x,y){return x===y&&(0!==x||1/x==1/y)||x!=x&&y!=y}"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var React=React__default,objectIs="function"==typeof Object.is?Object.is:is,useSyncExternalStore=React.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;useSyncExternalStoreWithSelector_development.useSyncExternalStoreWithSelector=function(subscribe,getSnapshot,getServerSnapshot,selector,isEqual){var instRef=useRef(null);if(null===instRef.current){var inst={hasValue:!1,value:null};instRef.current=inst}else inst=instRef.current;instRef=useMemo(function(){function memoizedSelector(nextSnapshot){if(!hasMemo){if(hasMemo=!0,memoizedSnapshot=nextSnapshot,nextSnapshot=selector(nextSnapshot),void 0!==isEqual&&inst.hasValue){var currentSelection=inst.value;if(isEqual(currentSelection,nextSnapshot))return memoizedSelection=currentSelection}return memoizedSelection=nextSnapshot}if(currentSelection=memoizedSelection,objectIs(memoizedSnapshot,nextSnapshot))return currentSelection;var nextSelection=selector(nextSnapshot);return void 0!==isEqual&&isEqual(currentSelection,nextSelection)?(memoizedSnapshot=nextSnapshot,currentSelection):(memoizedSnapshot=nextSnapshot,memoizedSelection=nextSelection)}var hasMemo=!1,memoizedSnapshot,memoizedSelection,maybeGetServerSnapshot=void 0===getServerSnapshot?null:getServerSnapshot;return[function(){return memoizedSelector(getSnapshot())},null===maybeGetServerSnapshot?void 0:function(){return memoizedSelector(maybeGetServerSnapshot())}]},[getSnapshot,getServerSnapshot,selector,isEqual]);var value=useSyncExternalStore(subscribe,instRef[0],instRef[1]);return useEffect(function(){inst.hasValue=!0,inst.value=value},[value]),useDebugValue(value),value},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()),useSyncExternalStoreWithSelector_development}"production"===process.env.NODE_ENV?withSelector.exports=requireUseSyncExternalStoreWithSelector_production():withSelector.exports=requireUseSyncExternalStoreWithSelector_development();var withSelectorExports=withSelector.exports,ContextKey=Symbol.for("react-redux-context"),gT="undefined"!=typeof globalThis?globalThis:{};function getContext(){if(!React.createContext)return{};const contextMap=gT[ContextKey]??=new Map;let realContext=contextMap.get(React.createContext);return realContext||(realContext=React.createContext(null),"production"!==process.env.NODE_ENV&&(realContext.displayName="ReactRedux"),contextMap.set(React.createContext,realContext)),realContext}var ReactReduxContext=getContext();function createReduxContextHook(context=ReactReduxContext){return function useReduxContext2(){const contextValue=React.useContext(context);if("production"!==process.env.NODE_ENV&&!contextValue)throw new Error("could not find react-redux context value; please ensure the component is wrapped in a <Provider>");return contextValue}}var useReduxContext=createReduxContextHook();function createStoreHook(context=ReactReduxContext){const useReduxContext2=context===ReactReduxContext?useReduxContext:createReduxContextHook(context),useStore2=()=>{const{store:store}=useReduxContext2();return store};return Object.assign(useStore2,{withTypes:()=>useStore2}),useStore2}var useStore=createStoreHook();function createDispatchHook(context=ReactReduxContext){const useStore2=context===ReactReduxContext?useStore:createStoreHook(context),useDispatch2=()=>{const store=undefined;return useStore2().dispatch};return Object.assign(useDispatch2,{withTypes:()=>useDispatch2}),useDispatch2}var useDispatch=createDispatchHook(),refEquality=(a,b)=>a===b;function createSelectorHook(context=ReactReduxContext){const useReduxContext2=context===ReactReduxContext?useReduxContext:createReduxContextHook(context),useSelector2=(selector,equalityFnOrOptions={})=>{const{equalityFn:equalityFn=refEquality}="function"==typeof equalityFnOrOptions?{equalityFn:equalityFnOrOptions}:equalityFnOrOptions;if("production"!==process.env.NODE_ENV){if(!selector)throw new Error("You must pass a selector to useSelector");if("function"!=typeof selector)throw new Error("You must pass a function as a selector to useSelector");if("function"!=typeof equalityFn)throw new Error("You must pass a function as an equality function to useSelector")}const reduxContext=useReduxContext2(),{store:store,subscription:subscription,getServerState:getServerState}=reduxContext,firstRun=React.useRef(!0),wrappedSelector=React.useCallback({[selector.name](state){const selected=selector(state);if("production"!==process.env.NODE_ENV){const{devModeChecks:devModeChecks={}}="function"==typeof equalityFnOrOptions?{}:equalityFnOrOptions,{identityFunctionCheck:identityFunctionCheck,stabilityCheck:stabilityCheck}=reduxContext,{identityFunctionCheck:finalIdentityFunctionCheck,stabilityCheck:finalStabilityCheck}={stabilityCheck:stabilityCheck,identityFunctionCheck:identityFunctionCheck,...devModeChecks};if("always"===finalStabilityCheck||"once"===finalStabilityCheck&&firstRun.current){const toCompare=selector(state);if(!equalityFn(selected,toCompare)){let stack;try{throw new Error}catch(e){({stack:stack}=e)}console.warn("Selector "+(selector.name||"unknown")+" returned a different result when called with the same parameters. This can lead to unnecessary rerenders.\nSelectors that return a new reference (such as an object or an array) should be memoized: https://redux.js.org/usage/deriving-data-selectors#optimizing-selectors-with-memoization",{state:state,selected:selected,selected2:toCompare,stack:stack})}}if(("always"===finalIdentityFunctionCheck||"once"===finalIdentityFunctionCheck&&firstRun.current)&&selected===state){let stack;try{throw new Error}catch(e){({stack:stack}=e)}console.warn("Selector "+(selector.name||"unknown")+" returned the root state when called. This can lead to unnecessary rerenders.\nSelectors that return the entire state are almost certainly a mistake, as they will cause a rerender whenever *anything* in state changes.",{stack:stack})}firstRun.current&&(firstRun.current=!1)}return selected}}[selector.name],[selector]),selectedState=withSelectorExports.useSyncExternalStoreWithSelector(subscription.addNestedSub,store.getState,getServerState||store.getState,wrappedSelector,equalityFn);return React.useDebugValue(selectedState),selectedState};return Object.assign(useSelector2,{withTypes:()=>useSelector2}),useSelector2}var useSelector=createSelectorHook();const useDeviceType=()=>{const dispatch=useDispatch(),deviceType=useSelector(state=>state.app.deviceType);useEffect(()=>{const updateDeviceType=()=>{dispatch(updateDeviceTypeFromWidth(window.innerWidth))};return updateDeviceType(),window.addEventListener("resize",updateDeviceType),()=>{window.removeEventListener("resize",updateDeviceType)}},[dispatch]);const isMobile=undefined,isTablet=undefined,isDesktop=undefined,isMobileOrTablet=undefined;return{deviceType:deviceType,isMobile:"mobile"===deviceType,isTablet:"tablet"===deviceType,isDesktop:"desktop"===deviceType,isMobileOrTablet:"mobile"===deviceType||"tablet"===deviceType}},useGlobalLoader=()=>{const dispatch=useAppDispatch(),{isAutoTransitioned:isAutoTransitioned}=useAppSelector(selectUIState),showLoader=useCallback(text=>{dispatch(showMiniLoading(text))},[dispatch]),hideLoader=useCallback(()=>{dispatch(hideMiniLoading())},[dispatch]),setLoaderText=useCallback(text=>{dispatch(setMiniLoadingText(text))},[dispatch]),withLoader=useCallback(async asyncFn=>{try{showLoader();const result=undefined;return await asyncFn()}finally{hideLoader()}},[showLoader,hideLoader]),showPostLoader=useCallback(text=>{dispatch(showLoading(text))},[dispatch]),hidePostLoader=useCallback(()=>{dispatch(isAutoTransitioned?hideAllLoaders():hideLoading())},[dispatch,isAutoTransitioned]),setPostLoaderText=useCallback(text=>{dispatch(setLoadingText(text))},[dispatch]),withPostLoader=useCallback(async asyncFn=>{try{showPostLoader();const result=undefined;return await asyncFn()}finally{hidePostLoader()}},[showPostLoader,hidePostLoader]),showMiniLoader=useCallback(text=>{dispatch(showMiniLoading(text))},[dispatch]),hideMiniLoader=useCallback(()=>{dispatch(hideMiniLoading())},[dispatch]),setMiniLoaderText=useCallback(text=>{dispatch(setMiniLoadingText(text))},[dispatch]),withMiniLoader=useCallback(async asyncFn=>{try{showMiniLoader();const result=undefined;return await asyncFn()}finally{hideMiniLoader()}},[showMiniLoader,hideMiniLoader]);return{showLoader:showLoader,hideLoader:hideLoader,withLoader:withLoader,setLoaderText:setLoaderText,showPostLoader:showPostLoader,hidePostLoader:hidePostLoader,withPostLoader:withPostLoader,setPostLoaderText:setPostLoaderText,showMiniLoader:showMiniLoader,hideMiniLoader:hideMiniLoader,withMiniLoader:withMiniLoader,setMiniLoaderText:setMiniLoaderText}},usePermission=()=>{const dispatch=useAppDispatch(),userInfo=useAppSelector(selectUserInfo),reduxUser=userInfo?.userInfo,[jwtUser,setJwtUser]=useState(null),currentUser=reduxUser||jwtUser,userLevel=getUserLevel$1(currentUser),adminStatus=isAdmin$1(currentUser),isLoggedIn=userInfo?.isLoggedIn||!!jwtUser;useEffect(()=>{const getJwtUser=undefined;(async()=>{if(reduxUser)setJwtUser(null);else try{const tokenUser=await getCurrentUserFromToken$1();setJwtUser(tokenUser)}catch(error){setJwtUser(null)}})()},[reduxUser]);const checkPermission=undefined,showAccessDeniedToast=undefined;return{checkPermission:useCallback(requiredLevel=>void 0===requiredLevel||(reduxUser?hasLevelPermission$1(reduxUser,requiredLevel):jwtUser?(console.warn("Redux store에 사용자 정보가 없어 JWT 토큰 정보를 사용합니다."),hasLevelPermission$1(jwtUser,requiredLevel)):0===requiredLevel),[reduxUser,jwtUser]),showAccessDeniedToast:useCallback(()=>{dispatch(showToast({title:"접근 권한이 없습니다.",content:"해당 메뉴에 접근할 권한이 없습니다.",headerTextColor:"text-red-500"}))},[dispatch]),userLevel:userLevel,isAdmin:adminStatus,isLoggedIn:isLoggedIn,currentUser:currentUser}},useRouterWithLoader=()=>{const router=useRouter(),pathname=usePathname(),{showMiniLoader:showMiniLoader,hideMiniLoader:hideMiniLoader}=useGlobalLoader();useEffect(()=>{hideMiniLoader()},[pathname,hideMiniLoader]);const shouldShowLoader=useCallback(href=>{try{let targetPath,isExternalDomain=!1;if(href.startsWith("http")){const targetUrl=new URL(href),currentDomain=window.location.hostname;isExternalDomain=targetUrl.hostname!==currentDomain,targetPath=targetUrl.pathname}else targetPath=href.split("?")[0].split("#")[0];return!isExternalDomain&&targetPath!==pathname}catch{return!href.startsWith("http")}},[pathname]),push=useCallback((href,options)=>(shouldShowLoader(href)&&showMiniLoader("페이지를 이동하는 중입니다."),router.push(href,options)),[router,showMiniLoader,shouldShowLoader]),replace=useCallback((href,options)=>(shouldShowLoader(href)&&showMiniLoader("페이지를 이동하는 중입니다."),router.replace(href,options)),[router,showMiniLoader,shouldShowLoader]);return{...router,push:push,replace:replace}},useAppDispatch=()=>useDispatch(),useAppSelector=useSelector;function TableHeader({columns:columns}){const{isMobile:isMobile}=useAppSelector(selectUIState),gridClasses=undefined;return jsx("div",{className:isMobile?"w-full bg-white border-b border-border-default grid grid-cols-12 gap-1":"w-full bg-white border-b border-border-default grid grid-cols-12 gap-2",children:columns.map((column,index)=>jsx(BoardTableHeader,{column:column},`${column.id}-${index}`))})}function BoardTableList({item:item,columns:columns}){const gridClasses="w-full bg-white border-b border-border-default grid grid-cols-12 gap-0 overflow-hidden";return item.map((e,i)=>jsx("div",{className:gridClasses+(e.isHighlight?" !bg-[#FFEDD5]":""),style:e.isHighlight?{backgroundColor:"#FFEDD5"}:{},children:columns.map((column,index)=>{const Component=column.render?column.render:BoardTableBody;return jsx(Component,{column:column,row:{...e,highlightText:e.isHighlight}},`${column.id}-${index}`)})},`${e.id}-${i}`))}function BoardTableContent({children:children,className:className=""}){return jsx("div",{className:`w-full flex-col justify-start items-center flex overflow-x-auto ${className}`.trim(),children:children})}const BoardTable={Header:TableHeader,Body:BoardTableList,Content:BoardTableContent};function BoardWrapper({children:children,className:className=""}){return jsx("div",{className:`w-full max-w-full h-auto p-3 sm:p-5 bg-white rounded-2xl shadow-custom border border-border-default flex-col justify-center items-center gap-3 sm:gap-5 flex overflow-hidden ${className}`.trim(),children:children})}const Board={Container:BoardContainer,Header:BoardHeader,Table:BoardTable,Pagination:BoardPagination,Wrapper:BoardWrapper};class PostService extends BaseService{constructor(options){super(options?.baseUrl||"/api/post",options?.defaultHeaders)}async getPostList(options){const params={boardId:options.boardId.toString(),page:options.page.toString(),pageSize:(options.pageSize||10).toString(),sortBy:options.sortBy||"latest",searchType:options.searchType||"title",searchText:options.searchText||"",needNotice:(!1!==options.needNotice).toString()};return void 0!==options.categoryId&&null!==options.categoryId&&""!==options.categoryId&&(params.categoryId=options.categoryId.toString()),options.status&&(params.status=options.status),options.writerId&&(params.writerId=options.writerId.toString()),this.getMini("/","게시글 목록 로딩중...",{params:params})}async getPostById(postId){return this.get(`/${postId}`)}async createPost(data){const formData=new FormData;return formData.append("title",data.title),formData.append("content",data.content),formData.append("boardId",data.boardId.toString()),formData.append("isNotice",(data.isNotice||!1).toString()),formData.append("hasFiles",(data.hasFiles||!1).toString()),null!==data.categoryId&&void 0!==data.categoryId&&formData.append("categoryId",data.categoryId.toString()),void 0!==data.downloadPoint&&null!==data.downloadPoint&&formData.append("downloadPoint",data.downloadPoint.toString()),data.attachments&&data.attachments.length>0&&formData.append("attachments",JSON.stringify(data.attachments)),data.metadata&&formData.append("metadata",JSON.stringify(data.metadata)),data.files&&data.files.length>0&&data.files.forEach(file=>{formData.append("files",file)}),this.postMini(`/${data.boardId}`,formData,"게시글 등록중...")}async updatePost(postId,data){return this.putMini(`/${postId}`,data,"게시글 수정중...")}async deletePost(postId){return this.deleteMini(`/${postId}`,"게시글 삭제중...")}async reactToPost(postId,reactionType){const reactionText="like"===reactionType?"추천 처리중...":"비추천 처리중...";return this.postMini(`/${postId}/reaction`,{reactionType:reactionType},reactionText)}async purchaseFiles(postId){return this.postMini(`/${postId}/purchase`,{},"파일 구매 처리중...")}async bookmarkPost(postId){return this.postMini(`/${postId}/bookmark`,{},"북마크 처리중...")}async removeBookmark(postId){return this.deleteMini(`/${postId}/bookmark`,"북마크 삭제중...")}async getBookmarkedPosts(){return this.getMini("/bookmarks","북마크된 게시글 불러오는 중...")}async movePost(postId,boardId){return this.patchMini(`/${postId}`,{board_id:boardId},"게시글 이동중...")}async createDraftPost(data){return this.postMini("/draft",data,"게시글 초안 생성중...")}async publishPost(postId){return this.putMini(`/${postId}/publish`,{},"게시글 발행중...")}async startAsyncFileUpload(postId,files,config){const formData=new FormData;formData.append("postId",postId.toString()),formData.append("needWatermark",(!1!==config?.needWatermark).toString()),formData.append("watermarkPosition",config?.watermarkPosition||"bottom-right"),formData.append("watermarkOpacity",(config?.watermarkOpacity||.7).toString()),files.forEach(file=>{formData.append("files",file)});const response=await this.postMini("/upload-async",formData,"파일 업로드 시작중...");if(response.data&&!response.data.success)throw new Error(response.data.message);return{...response,data:response.data?.data||null}}async getUploadProgress(postId){const response=await this.getSilent(`/upload-progress/${postId}`);if(response.data&&!response.data.success)throw new Error(response.data.message||"진행도 조회에 실패했습니다");return{...response,data:response.data?.data||null}}async retryFailedFiles(postId,failedFileUuids){return this.postMini(`/retry-upload/${postId}`,{failedFileUuids:failedFileUuids},"실패한 파일 재업로드 중...")}async cancelUpload(postId){return this.deleteMini(`/cancel-upload/${postId}`,"업로드 취소중...")}async createPostAsync(data){const draftResponse=await this.createDraftPost({title:data.title,content:data.content,boardId:data.boardId,categoryId:data.categoryId||void 0});return"Y"===draftResponse.successOrNot&&draftResponse.data?(data.files&&data.files.length>0?await this.startAsyncFileUpload(draftResponse.data.id,data.files):await this.publishPost(draftResponse.data.id),draftResponse):draftResponse}async getDraftPosts(options={}){const params={status:"draft",page:(options.page||1).toString(),pageSize:(options.pageSize||10).toString(),sortBy:options.sortBy||"latest"};return options.writerId&&(params.writerId=options.writerId.toString()),this.getSilent("/",{params:params})}async searchPosts(keyword,page=1,pageSize=10,boardIds){const params={keyword:keyword,page:page.toString(),pageSize:pageSize.toString()};return boardIds&&boardIds.length>0&&(params.boardIds=boardIds.join(",")),this.get("/search",{params:params})}async getPostStats(boardId){const params=boardId?{boardId:boardId.toString()}:{};return this.get("/stats",{params:params})}}const postService={getPost(options){const service=undefined;return(new PostService).getPostList(options)},createPost(data){const service=undefined;return(new PostService).createPost(data)},reactionPost(postId,reactionType){const service=undefined;return(new PostService).reactToPost(postId,reactionType)},deletePost(postId){const service=undefined;return(new PostService).deletePost(postId)},updatePost(postId,data){const service=undefined;return(new PostService).updatePost(postId,data)},purchaseFiles(postId){const service=undefined;return(new PostService).purchaseFiles(postId)},bookmarkPost(postId){const service=undefined;return(new PostService).bookmarkPost(postId)},deleteBookmarkPost(postId){const service=undefined;return(new PostService).removeBookmark(postId)},getBookmarkPosts(){const service=undefined;return(new PostService).getBookmarkedPosts()},movePost(postId,boardId){const service=undefined;return(new PostService).movePost(postId,boardId)},createDraftPost(data){const service=undefined;return(new PostService).createDraftPost(data)},publishPost(postId){const service=undefined;return(new PostService).publishPost(postId)},getDraftPosts(options={}){const service=undefined;return(new PostService).getDraftPosts(options)},startAsyncFileUpload(postId,files,config){const service=undefined;return(new PostService).startAsyncFileUpload(postId,files,config)},getUploadProgress(postId){const service=undefined;return(new PostService).getUploadProgress(postId)},retryFailedFiles(postId,failedFileUuids){const service=undefined;return(new PostService).retryFailedFiles(postId,failedFileUuids)},cancelUpload(postId){const service=undefined;return(new PostService).cancelUpload(postId)},createPostAsync(data){const service=undefined;return(new PostService).createPostAsync(data)}};class BoardService extends BaseService{constructor(options){super(options?.baseUrl||"/api/boards",options?.defaultHeaders)}async getBoards(options={}){const params={};return options.page&&(params.page=options.page.toString()),options.pageSize&&(params.pageSize=options.pageSize.toString()),options.sortBy&&(params.sortBy=options.sortBy),options.searchText&&(params.searchText=options.searchText),options.searchType&&(params.searchType=options.searchType),void 0!==options.isActive&&(params.isActive=options.isActive.toString()),options.categoryId&&(params.categoryId=options.categoryId.toString()),this.getMini("/","게시판 목록 로딩중...",{params:params})}async getBoard(boardId){return this.getMini(`/${boardId}`,"게시판 정보 로딩중...")}async createBoard(data){return this.postMini("/",data,"게시판 생성중...")}async updateBoard(boardId,data){return this.putMini(`/${boardId}`,data,"게시판 수정중...")}async deleteBoard(boardId){return this.deleteMini(`/${boardId}`,"게시판 삭제중...")}async getBoardCategories(boardId){return this.getMini(`/${boardId}/categories`,"카테고리 로딩중...")}async createBoardCategory(boardId,data){return this.postMini(`/${boardId}/categories`,data,"카테고리 생성중...")}async updateBoardCategory(boardId,categoryId,data){return this.putMini(`/${boardId}/categories/${categoryId}`,data,"카테고리 수정중...")}async deleteBoardCategory(boardId,categoryId){return this.deleteMini(`/${boardId}/categories/${categoryId}`,"카테고리 삭제중...")}async getBoardStats(boardId){return this.getSilent(`/${boardId}/stats`)}async searchBoards(keyword,page=1,pageSize=10){return this.get("/search",{params:{keyword:keyword,page:page.toString(),pageSize:pageSize.toString()}})}async getPopularBoards(limit=10){return this.getSilent("/popular",{params:{limit:limit.toString()}})}async getRecentlyActiveBoards(limit=10){return this.getSilent("/recent-activity",{params:{limit:limit.toString()}})}async getFavoriteBoards(){return this.getMini("/favorites","즐겨찾기 게시판 로딩중...")}async addToFavorites(boardId){return this.postMini(`/${boardId}/favorite`,{},"즐겨찾기 추가중...")}async removeFromFavorites(boardId){return this.deleteMini(`/${boardId}/favorite`,"즐겨찾기 제거중...")}async getBoardPermissions(boardId){return this.getSilent(`/${boardId}/permissions`)}async updateBoardPermissions(boardId,permissions){return this.patchMini(`/${boardId}/permissions`,permissions,"권한 설정 업데이트 중...")}async getBoardModerators(boardId){return this.get(`/${boardId}/moderators`)}async addBoardModerator(boardId,userId){return this.postMini(`/${boardId}/moderators`,{userId:userId},"모더레이터 추가중...")}async removeBoardModerator(boardId,userId){return this.deleteMini(`/${boardId}/moderators/${userId}`,"모더레이터 제거중...")}async reportBoard(boardId,reason,description){return this.postMini(`/${boardId}/report`,{reason:reason,description:description},"신고 접수중...")}async getBoardActivity(boardId,page=1,pageSize=20){return this.get(`/${boardId}/activity`,{params:{page:page.toString(),pageSize:pageSize.toString()}})}}const boardService={getBoards(){const service=undefined;return(new BoardService).getBoards()},getBoard(boardId){const service=undefined;return(new BoardService).getBoard(boardId)},getBoardCategories(boardId){const service=undefined;return(new BoardService).getBoardCategories(boardId)}};class AuthService extends BaseService{constructor(options){super(options?.baseUrl||"/api/auth",options?.defaultHeaders)}async login(credentials){return this.postMini("/login",credentials,"로그인 중...")}async logout(){return this.postMini("/logout",{},"로그아웃 중...")}async register(data){return this.postMini("/register",data,"회원가입 처리 중...")}async refreshToken(refreshToken){return this.postSilent("/refresh",{refreshToken:refreshToken})}async validateSession(){return this.getSilent("/validate")}async getCurrentUser(){return this.getMini("/me","사용자 정보 확인 중...")}async requestPasswordReset(data){return this.postMini("/password-reset/request",data,"비밀번호 재설정 요청 중...")}async resetPassword(token,newPassword,newPasswordConfirm){return this.postMini("/password-reset/confirm",{token:token,newPassword:newPassword,newPasswordConfirm:newPasswordConfirm},"비밀번호 재설정 중...")}async changePassword(data){return this.putMini("/password",data,"비밀번호 변경 중...")}async sendEmailVerification(email){return this.postMini("/verify-email/send",{email:email},"인증 메일 발송 중...")}async verifyEmail(token){return this.postMini("/verify-email/confirm",{token:token},"이메일 인증 중...")}async checkUserIdAvailability(userId){return this.get("/check/userid",{params:{userId:userId}})}async checkNicknameAvailability(nickname){return this.get("/check/nickname",{params:{nickname:nickname}})}async checkEmailAvailability(email){return this.get("/check/email",{params:{email:email}})}async getUserSessions(){return this.get("/sessions")}async revokeSession(sessionId){return this.deleteMini(`/sessions/${sessionId}`,"세션 해제 중...")}async revokeAllSessions(){return this.deleteMini("/sessions/all","모든 세션 해제 중...")}async enable2FA(){return this.postMini("/2fa/enable",{},"2FA 설정 중...")}async confirm2FA(code){return this.postMini("/2fa/confirm",{code:code},"2FA 인증 중...")}async disable2FA(password){return this.deleteMini("/2fa/disable","2FA 해제 중...")}async verify2FACode(code){return this.postMini("/2fa/verify",{code:code},"2FA 코드 확인 중...")}}const authService={login(credentials){const service=undefined;return(new AuthService).login(credentials)},logout(){const service=undefined;return(new AuthService).logout()},register(data){const service=undefined;return(new AuthService).register(data)},refreshToken(refreshToken){const service=undefined;return(new AuthService).refreshToken(refreshToken)},validateSession(){const service=undefined;return(new AuthService).validateSession()},getCurrentUser(){const service=undefined;return(new AuthService).getCurrentUser()},requestPasswordReset(data){const service=undefined;return(new AuthService).requestPasswordReset(data)},resetPassword(token,newPassword,newPasswordConfirm){const service=undefined;return(new AuthService).resetPassword(token,newPassword,newPasswordConfirm)},changePassword(data){const service=undefined;return(new AuthService).changePassword(data)},sendEmailVerification(email){const service=undefined;return(new AuthService).sendEmailVerification(email)},verifyEmail(token){const service=undefined;return(new AuthService).verifyEmail(token)},checkUserIdAvailability(userId){const service=undefined;return(new AuthService).checkUserIdAvailability(userId)},checkNicknameAvailability(nickname){const service=undefined;return(new AuthService).checkNicknameAvailability(nickname)},checkEmailAvailability(email){const service=undefined;return(new AuthService).checkEmailAvailability(email)}};class PermissionService extends BaseService{constructor(options){super(options?.baseUrl||"/api/permissions",options?.defaultHeaders)}async checkPermission(check){return this.getSilent("/check",{params:{resource:check.resource,action:check.action,context:check.context?JSON.stringify(check.context):void 0}})}async checkPermissions(checks){return this.postSilent("/check-multiple",{checks:checks})}async getMyPermissions(){return this.getMini("/me","권한 정보 조회 중...")}async getUserPermissions(userId){return this.get(`/users/${userId}`)}async getLevels(){return this.getSilent("/levels")}async getLevel(level){return this.get(`/levels/${level}`)}async updateUserLevel(userId,level,reason){return this.patchMini(`/users/${userId}/level`,{level:level,reason:reason},"사용자 레벨 변경 중...")}async getRoles(){return this.get("/roles")}async getRole(roleId){return this.get(`/roles/${roleId}`)}async createRole(role){return this.postMini("/roles",role,"역할 생성 중...")}async updateRole(roleId,updates){return this.putMini(`/roles/${roleId}`,updates,"역할 수정 중...")}async deleteRole(roleId){return this.deleteMini(`/roles/${roleId}`,"역할 삭제 중...")}async assignRole(userId,roleId,reason){return this.postMini(`/users/${userId}/roles`,{roleId:roleId,reason:reason},"역할 할당 중...")}async removeRole(userId,roleId,reason){return this.deleteMini(`/users/${userId}/roles/${roleId}`,"역할 제거 중...")}async grantPermission(grant){return this.postMini("/grants",grant,"권한 부여 중...")}async revokePermission(userId,permission,context,reason){return this.deleteMini(`/grants/${userId}/${permission}`,"권한 회수 중...")}async getUserGrants(userId){return this.get(`/grants/users/${userId}`)}async getPermissionHistory(userId,page=1,pageSize=20){return this.get(`/history/${userId}`,{params:{page:page.toString(),pageSize:pageSize.toString()}})}async checkBoardAccess(boardId,action="read"){return this.checkPermission({resource:"board",action:action,context:{boardId:boardId}})}async checkPostAccess(postId,action="read"){return this.checkPermission({resource:"post",action:action,context:{postId:postId}})}async checkAdminAccess(section="system"){return this.checkPermission({resource:"admin",action:"access",context:{section:section}})}async getLevelProgression(userId){const endpoint=userId?`/progression/${userId}`:"/progression/me";return this.getMini(endpoint,"레벨 정보 조회 중...")}async updateUserBanStatus(userId,banned,reason,duration){return this.patchMini(`/users/${userId}/ban`,{banned:banned,reason:reason,duration:duration},banned?"사용자 제재 중...":"사용자 제재 해제 중...")}async getUserRestrictions(userId){return this.get(`/users/${userId}/restrictions`)}}const permissionService={checkPermission(check){const service=undefined;return(new PermissionService).checkPermission(check)},getMyPermissions(){const service=undefined;return(new PermissionService).getMyPermissions()},getLevels(){const service=undefined;return(new PermissionService).getLevels()},checkBoardAccess(boardId,action="read"){const service=undefined;return(new PermissionService).checkBoardAccess(boardId,action)},checkAdminAccess(section="system"){const service=undefined;return(new PermissionService).checkAdminAccess(section)}},useAuth=()=>{const dispatch=useAppDispatch(),userState=useAppSelector(selectUserInfo),{withLoader:withLoader,showLoader:showLoader,hideLoader:hideLoader}=useGlobalLoader(),router=useRouterWithLoader(),loginWithLoader=useCallback(async loginData=>withLoader(async()=>{const result=await dispatch(login(loginData));if(login.fulfilled.match(result))return dispatch(showToast({title:"로그인 성공",content:`환영합니다, ${result.payload.nickname}님!`,headerTextColor:"text-green-500"})),{success:!0,user:result.payload};{const errorMessage=result.payload?.result||"로그인에 실패했습니다.";return dispatch(showToast({title:"로그인 실패",content:errorMessage,headerTextColor:"text-red-500"})),{success:!1,error:errorMessage}}}),[dispatch,withLoader]),logoutWithLoader=useCallback(async()=>withLoader(async()=>{const result=await dispatch(logout());if(logout.fulfilled.match(result))return dispatch(showToast({title:"로그아웃 완료",content:"안전하게 로그아웃되었습니다.",headerTextColor:"text-blue-500"})),router.push("/"),{success:!0};{const errorMessage=result.payload?.result||"로그아웃에 실패했습니다.";return dispatch(showToast({title:"로그아웃 실패",content:errorMessage,headerTextColor:"text-red-500"})),{success:!1,error:errorMessage}}}),[dispatch,withLoader,router]),initializeAuth=useCallback(async()=>{try{showLoader("인증 정보를 확인하는 중입니다...");const result=await dispatch(autoLogin());return autoLogin.fulfilled.match(result)?{success:!0,user:result.payload}:{success:!1,error:result.payload?.result}}finally{hideLoader()}},[dispatch,showLoader,hideLoader]),checkSession=useCallback(async()=>{try{const{getCurrentUserFromToken:getCurrentUserFromToken,isTokenExpired:isTokenExpired}=await import("@util/jwtUtil"),tokenPayload=await getCurrentUserFromToken();return tokenPayload?isTokenExpired(tokenPayload)?{valid:!1,reason:"EXPIRED"}:{valid:!0,user:tokenPayload}:{valid:!1,reason:"NO_TOKEN"}}catch(error){return console.error("세션 확인 실패:",error),{valid:!1,reason:"ERROR"}}},[]),navigateWithAuth=useCallback(async(path,requiredLevel,adminOnly)=>{const sessionCheck=await checkSession();return sessionCheck.valid?adminOnly&&sessionCheck.user&&!sessionCheck.user.is_admin?(dispatch(showToast({title:"권한 부족",content:"관리자만 접근할 수 있습니다.",headerTextColor:"text-red-500"})),!1):(router.push(path),!0):(dispatch(showToast({title:"로그인 필요",content:"로그인이 필요한 서비스입니다.",headerTextColor:"text-orange-500"})),!1)},[checkSession,dispatch,router]);return{userState:userState,isLoggedIn:userState.isLoggedIn,user:userState.userInfo,error:userState.error,loginWithLoader:loginWithLoader,logoutWithLoader:logoutWithLoader,initializeAuth:initializeAuth,checkSession:checkSession,navigateWithAuth:navigateWithAuth,isAdmin:()=>("admin"===userState.userInfo?.permissionType||"super_admin"===userState.userInfo?.permissionType)&&(userState.userInfo?.level??0)>=99,isUser:()=>userState.isLoggedIn&&userState.userInfo}},useAuthGuard=(options={})=>{const userState=useAppSelector(selectUserInfo),{userInfo:userInfo,isLoggedIn:isLoggedIn}=userState,[isLoading,setIsLoading]=useState(!0),[errorType,setErrorType]=useState(null),[tokenUser,setTokenUser]=useState(null),isCheckingRef=useRef(!1),lastTokenUserRef=useRef(null),checkTokenAuth=useCallback(async()=>{try{const{validateAndCleanToken:validateAndCleanToken}=await import("@util/jwtUtil"),tokenPayload=await validateAndCleanToken();if(!tokenPayload)return setErrorType("LOGIN_REQUIRED"),!1;const tokenUserString=JSON.stringify(tokenPayload);return lastTokenUserRef.current!==tokenUserString&&(lastTokenUserRef.current=tokenUserString,setTokenUser(tokenPayload)),!0}catch(error){console.error("토큰 인증 확인 실패:",error),setErrorType("TOKEN_INVALID");const{removeExpiredTokenFromCookie:removeExpiredTokenFromCookie}=await import("@util/jwtUtil");return removeExpiredTokenFromCookie(),!1}},[]),checkPermissions=useCallback(user=>{if(options.adminOnly&&!isAdmin$1(user))return setErrorType("ADMIN_ONLY"),!1;if(void 0!==options.requiredLevel&&!hasLevelPermission$1(user,options.requiredLevel))return setErrorType("INSUFFICIENT_PERMISSION"),!1;if(options.boardPermissions){const writeLevel=options.boardPermissions.writeLevel,readLevel=options.boardPermissions.readLevel;if(void 0!==writeLevel&&!hasBoardPermission$1(user,writeLevel,!0))return setErrorType("INSUFFICIENT_PERMISSION"),!1;if(void 0!==readLevel&&!hasBoardPermission$1(user,readLevel,!0))return setErrorType("INSUFFICIENT_PERMISSION"),!1}return!0},[options.adminOnly,options.requiredLevel,options.boardPermissions]),checkPermissionAsync=useCallback(async()=>{if(isCheckingRef.current)return!1;isCheckingRef.current=!0,setIsLoading(!0),setErrorType(null);try{if(isLoggedIn&&userInfo){const hasPermission=undefined;return checkPermissions(userInfo)}const isTokenValid=undefined;if(!await checkTokenAuth())return!1;if(!tokenUser)return setErrorType("LOGIN_REQUIRED"),!1;console.warn("Redux store에 사용자 정보가 없어 JWT 토큰 정보로 권한 체크를 수행합니다.");const hasPermission=undefined;return checkPermissions(tokenUser)}catch(error){return console.error("권한 체크 실패:",error),setErrorType("TOKEN_INVALID"),!1}finally{setIsLoading(!1),isCheckingRef.current=!1}},[checkTokenAuth,checkPermissions,isLoggedIn,userInfo,tokenUser]);useEffect(()=>{checkPermissionAsync()},[]),useEffect(()=>{if(isLoggedIn&&userInfo&&!isCheckingRef.current){const hasPermission=undefined;checkPermissions(userInfo)?(setIsLoading(!1),setErrorType(null)):setIsLoading(!1)}},[isLoggedIn,userInfo,checkPermissions]);const currentUser=userInfo||tokenUser,isAuthenticated=isLoggedIn&&!!currentUser,hasPermission=undefined;return{isAuthenticated:isAuthenticated,hasPermission:isAuthenticated&&!errorType,isLoading:isLoading,user:currentUser,errorType:errorType,checkPermissionAsync:checkPermissionAsync}},useUserPointQuery=userId=>useQuery({queryKey:["userPoint",userId],queryFn:()=>pointService.getUserPoint(userId),staleTime:18e4,gcTime:36e5,retry:3,select:data=>{if("Y"===data.successOrNot&&data.data)return data.data;throw new Error("Failed to fetch user point")}}),useUserPointHistoryQuery=userId=>useQuery({queryKey:["userPointHistory",userId],queryFn:()=>pointService.getUserPointHistory(userId)}),usePostQuery=(params,options)=>useQuery({queryKey:["post",params],queryFn:()=>PostService.getPost(params),staleTime:1e4,gcTime:864e5,retry:3,enabled:options?.enabled,placeholderData:prev=>prev,refetchOnMount:!1,select:data=>"N"===data.successOrNot?{data:{items:[],totalCount:0,notices:[]}}:data.data?{data:{items:data.data.items.map(item=>({...item,created_at:timeAgo$1(item.created_at||(new Date).toISOString())})),totalCount:data.data.totalCount,notices:data.data.notices}}:{data:{items:[],totalCount:0,notices:[]}}}),usePostBookmarkQuery=()=>useQuery({queryKey:["postBookmark"],queryFn:()=>PostService.getBookmarkPosts(),staleTime:3e4,gcTime:864e5,retry:3,select:data=>"N"===data.successOrNot?{data:[]}:data.data}),useDraftPostQuery=(params={},options={enabled:!0,enablePolling:!1})=>useQuery({queryKey:["draftPost",params],queryFn:()=>PostService.getDraftPosts(params),staleTime:0,gcTime:3e5,retry:3,enabled:options?.enabled,refetchInterval:query=>{if(!options?.enablePolling)return!1;const result=query.state.data;if(result&&result.data&&Array.isArray(result.data)){const allCompleted=undefined;if(result.data.every(post=>!post.attachments||0===post.attachments.length||post.attachments.every(attachment=>"uploaded"===attachment.status)))return console.log("✅ 모든 파일 업로드가 완료되어 폴링을 중지합니다."),!1}return 2e3},refetchIntervalInBackground:!1,select:data=>"N"===data.successOrNot?{data:{items:[],totalCount:0,notices:[]}}:data.data?{data:{items:data.data.items.map(item=>({...item,created_at:timeAgo$1(item.created_at||(new Date).toISOString())})),totalCount:data.data.totalCount,notices:data.data.notices}}:{data:{items:[],totalCount:0,notices:[]}}}),useBoardQuery=options=>useQuery({queryKey:["boards"],queryFn:()=>BoardService.getBoards(),staleTime:36e5,gcTime:864e5,retry:3,enabled:options?.enabled,select:data=>"N"!==data.successOrNot&&data.data?data:{...data,data:[]}}),useCommentQuery=(params,options)=>useQuery({queryKey:["comments",params],queryFn:()=>commentService.getComments(params),staleTime:3e5,gcTime:18e5,retry:2,enabled:options?.enabled??!0,select:data=>{if("N"===data.successOrNot)return{data:{items:[],totalCount:0}};if(!data.data)return{data:{items:[],totalCount:0}};const result=undefined;return{data:{items:Array.isArray(data.data.items)?data.data.items.map(item=>({...item,created_at:timeAgo$1(item.created_at)})):[],totalCount:data.data.totalCount||0}}}});function createColorPalette(baseColor,options={}){const{saturation:saturation=70,lightness:lightness=50,steps:steps=11}=options,palette={};return palette[500]=baseColor,palette[50]=lightenColor(baseColor,.95),palette[100]=lightenColor(baseColor,.85),palette[200]=lightenColor(baseColor,.7),palette[300]=lightenColor(baseColor,.5),palette[400]=lightenColor(baseColor,.25),palette[600]=darkenColor(baseColor,.15),palette[700]=darkenColor(baseColor,.3),palette[800]=darkenColor(baseColor,.5),palette[900]=darkenColor(baseColor,.7),palette[950]=darkenColor(baseColor,.85),palette}function lightenColor(color,amount){const hex=color.replace("#",""),num=parseInt(hex,16),r=undefined,g=undefined,b=undefined;return`#${(Math.min(255,Math.floor((num>>16)+(255-(num>>16))*amount))<<16|Math.min(255,Math.floor((num>>8&255)+(255-(num>>8&255))*amount))<<8|Math.min(255,Math.floor((255&num)+(255-(255&num))*amount))).toString(16).padStart(6,"0")}`}function darkenColor(color,amount){const hex=color.replace("#",""),num=parseInt(hex,16),r=undefined,g=undefined,b=undefined;return`#${(Math.max(0,Math.floor((num>>16)*(1-amount)))<<16|Math.max(0,Math.floor((num>>8&255)*(1-amount)))<<8|Math.max(0,Math.floor((255&num)*(1-amount)))).toString(16).padStart(6,"0")}`}function createSemanticColors(brandColor,options={}){return{primary:createColorPalette(brandColor),secondary:options.secondary?createColorPalette(options.secondary):defaultColorPalettes.slate,success:options.success?createColorPalette(options.success):defaultColorPalettes.emerald,warning:options.warning?createColorPalette(options.warning):defaultColorPalettes.amber,error:options.error?createColorPalette(options.error):defaultColorPalettes.red,info:options.info?createColorPalette(options.info):defaultColorPalettes.sky,gray:defaultColorPalettes.gray}}function createFontScale(baseSize=1,ratio=1.2){return{xs:baseSize/(ratio*ratio)+"rem",sm:baseSize/ratio+"rem",base:`${baseSize}rem`,lg:baseSize*ratio+"rem",xl:baseSize*ratio*ratio+"rem","2xl":baseSize*Math.pow(ratio,3)+"rem","3xl":baseSize*Math.pow(ratio,4)+"rem","4xl":baseSize*Math.pow(ratio,5)+"rem","5xl":baseSize*Math.pow(ratio,6)+"rem","6xl":baseSize*Math.pow(ratio,7)+"rem"}}function createTypographyConfig(options){const config={};if(options.fontFamily&&(config.fontFamily=options.fontFamily),options.fontScale){const{baseSize:baseSize=1,ratio:ratio=1.2}=options.fontScale;config.fontSize=createFontScale(baseSize,ratio)}return options.fontWeights&&(config.fontWeight=options.fontWeights),options.lineHeight&&(config.lineHeight=options.lineHeight),config}function createComponentConfig(customizations){return customizations}function createCustomTheme(config){const override={};return(config.brandColor||config.colors)&&(override.colors={semantic:config.brandColor?createSemanticColors(config.brandColor,config.colors):void 0}),(config.fontFamily||config.fontScale)&&(override.typography=createTypographyConfig({fontFamily:config.fontFamily?{sans:config.fontFamily}:void 0,fontScale:config.fontScale})),config.components&&(override.components=config.components),override}function validateThemeOverride(override){const warnings=[],errors=[];return override.colors?.semantic&&Object.entries(override.colors.semantic).forEach(([colorName,palette])=>{palette&&Object.entries(palette).forEach(([shade,color])=>{"string"!=typeof color||isValidHexColor(color)||warnings.push(`Invalid color format: ${colorName}.${shade} = ${color}`)})}),{isValid:0===errors.length,warnings:warnings,errors:errors}}function isValidHexColor(hex){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(hex)}function extractThemePreview(theme){return{primary:theme.colors.semantic.primary[500],secondary:theme.colors.semantic.secondary[500],success:theme.colors.semantic.success[500],warning:theme.colors.semantic.warning[500],error:theme.colors.semantic.error[500],background:theme.colors.system.background.primary,text:theme.colors.system.text.primary}}function createQuickTheme(brandColor,locale="default",mode="light"){const themeOverride={};return brandColor&&(themeOverride.colors={semantic:{primary:require("./utils/themeHelpers").createColorPalette(brandColor)}}),"korean"===locale&&(themeOverride.typography=require("./tokens/typography").koreanOptimizedTypography),{mode:mode,theme:themeOverride,cssVarPrefix:"cc",respectSystemTheme:!0}}ThemeProvider,useTheme,defaultLightTheme,defaultDarkTheme,require("./utils/themeHelpers").createCustomTheme;const VERSION="1.3.2",PACKAGE_NAME="@team-semicolon/community-core";function createClientSupabase(){const client=createClient(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"sb-access-token",storage:{getItem:key=>{if("undefined"==typeof window)return null;try{const value=document.cookie.split("; ").find(row=>row.startsWith(`${key}=`))?.split("=")[1];if(!value)return null;const decodedValue=decodeURIComponent(value);try{const sessionData=JSON.parse(decodedValue);sessionData?.access_token&&Promise.resolve().then(function(){return jwtUtil}).then(({decodeJWTPayload:decodeJWTPayload,isTokenExpired:isTokenExpired,removeExpiredTokenFromCookie:removeExpiredTokenFromCookie})=>{const payload=decodeJWTPayload(sessionData.access_token);payload&&isTokenExpired(payload)&&(console.log("🗑️ 클라이언트 Storage: 만료된 토큰 감지, 정리 중..."),removeExpiredTokenFromCookie(key))})}catch(parseError){console.warn("클라이언트 Storage: 세션 데이터 파싱 실패:",parseError)}return decodedValue}catch(error){return console.error("❌ 클라이언트: 쿠키 읽기 실패:",error),null}},setItem:(key,value)=>{if("undefined"!=typeof window)try{const sessionData=undefined;if(!JSON.parse(value).access_token)return;const encodedValue=encodeURIComponent(value),expires=new Date;expires.setDate(expires.getDate()+30),document.cookie=`${key}=${encodedValue}; expires=${expires.toUTCString()}; path=/; SameSite=Lax; Secure`}catch(error){}},removeItem:key=>{if("undefined"!=typeof window)try{document.cookie=`${key}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`}catch(error){}}}}});if("undefined"!=typeof window){let isHandlingSignOut=!1;client.auth.onAuthStateChange((event,session)=>{switch(event){case"SIGNED_OUT":isHandlingSignOut||(isHandlingSignOut=!0,client.auth.getSession().then(()=>{isHandlingSignOut=!1}));break;case"TOKEN_REFRESHED":break;case"USER_UPDATED":session||isHandlingSignOut||(isHandlingSignOut=!0,client.auth.signOut().then(()=>{isHandlingSignOut=!1}))}})}return client}const clientSupabase=createClientSupabase();var client=Object.freeze({__proto__:null,clientSupabase:clientSupabase});export{AuthService,Avatar,Badge,BaseService,Board,BoardContainer,BoardHeader,BoardPagination,BoardService,BoardTable,BoardWrapper,Button,Checkbox,Input,PACKAGE_NAME,PermissionService,PostService,Radio,Select,Skeleton,SkeletonAvatar,SkeletonButton,SkeletonCard,SkeletonText,Switch,TextArea,ThemeProvider$1 as ThemeProvider,UserService,index as Utils,VERSION,authService,baseService,boardService,createCSSVariable,createColorPalette,createColorVariable,createComponentConfig,createCustomTheme,createFontSizeVariable,createQuickTheme,createSemanticColors,createSpacingVariable,createTypographyConfig,defaultDarkTheme$1 as defaultDarkTheme,defaultLightTheme$1 as defaultLightTheme,extractThemePreview,formatDate,formatNumberWithComma,generateCSSVariables,getPackageConfig,getThemeByMode,getThemePreset,initializeCommunityCore,isAdmin,koreanDarkTheme,koreanLightTheme,permissionService,postService,timeAgo,useAuth,useAuthGuard,useBoardQuery,useCSSVariable,useCommentQuery,useDeviceType,useDraftPostQuery,useGlobalLoader,usePermission,usePostBookmarkQuery,usePostQuery,useRouterWithLoader,useTheme$1 as useTheme,useThemeColors,useThemeMode,useThemeSpacing,useThemeTypography,useUserPointHistoryQuery,useUserPointQuery,userService,validateThemeOverride};
//# sourceMappingURL=index.esm.js.map
